

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>00 OK3576-C_Linux6.1.84_用户使用手册 &mdash; ROCKCHIP RK3576 Documentation  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=d5412799" />

  
    <link rel="shortcut icon" href="_static/forlinx.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="0 OK3576-C_硬件手册" href="OK3576-C_hardware.html" />
    <link rel="prev" title="RK3576 Manuals" href="index.html" />
   
  <!-- Load Font Awesome from CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/forlinx-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">OK3576-C_Linux6.1.84</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">00 OK3576-C_Linux6.1.84_用户使用手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id1">免责声明</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id2">概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id3">适用范围</a></li>
<li class="toctree-l1"><a class="reference internal" href="#id4">更新记录</a></li>
<li class="toctree-l1"><a class="reference internal" href="#ok3576">01_OK3576开发板介绍</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id5">1.1 OK3576开发板简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linux-6-1-84">1.2 Linux 6.1.84系统软件资源介绍</a></li>
<li class="toctree-l2"><a class="reference internal" href="#emmc">1.3 eMMC存储器分区表</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id6">02_快速开机启动</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id7">2.1 开机前的准备</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">2.2 调试串口驱动安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">2.3 串口登录方式</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">2.3.1 串口连接设置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11"></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id12">2.3.2 串口登录常见问题</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id13">2.4 系统关闭</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id14">03_OK3576平台界面功能使用及测试</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id15">3.1 桌面功能测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">3.1.1  界面功能简介</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">3.1.2  浏览器测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">3.1.3  播放音乐测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">3.1.4  播放视频测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#g-5g">3.1.5  4G/5G 测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">3.1.6  看门狗测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">3.1.7  串口测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">3.1.8  背光测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">3.1.9  按键测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rtc">3.1.10  RTC测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">3.1.11  网络配置测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id25">3.1.12  数据库测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">3.1.13  系统信息测试</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id27">3.2 命令行功能测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id28">3.2.1  系统信息查询</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id29">3.2.2  调频测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id30">3.2.3  温度测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ddr">3.2.4  DDR测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">3.2.5  看门狗测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id32">3.2.6  RTC功能测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">3.2.7  按键测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id34">3.2.8  以太网配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uart-485">3.2.9  UART 485测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adc">3.2.10  ADC测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tf">3.2.11  TF卡测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id35">3.2.12  eMMC 测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usb">3.2.13  USB鼠标测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usb3-0">3.2.14  USB3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#type-c">3.2.15  TYPE-C 测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wifi">3.2.16  WIFI 测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36">3.2.17  蓝牙测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">3.2.18  4G/5G</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id38">3.2.19  放/录音测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id39">3.2.19.1  查看声卡</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hdmi">3.2.19.2  HDMI 播放声音</a></li>
<li class="toctree-l4"><a class="reference internal" href="#speaker-headphone">3.2.19.3  Speaker Headphone 播放声音</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mic">3.2.19.4  MIC输入</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#lcd">3.2.20  LCD 背光调节</a></li>
<li class="toctree-l3"><a class="reference internal" href="#can">3.2.21  CAN测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pcie">3.2.22  PCIE测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rknpu">3.2.23  RKNPU测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sqlite3">3.2.24  SQLite3测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gpio">3.2.25  GPIO测试</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id40">04_OK3576平台多媒体测试</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id41">4.1 音频和视频播放体验</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gst-play">4.1.1使用gst-play播放器播放视频和音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gst-launch">4.1.2使用gst-launch 播放视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id42">4.1.3使用gst-launch 播放音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">4.1.4使用gst-launch 播放视频和音频</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id44">4.2 视频硬编码</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#h-264">4.2.1视频硬编码H.264</a></li>
<li class="toctree-l3"><a class="reference internal" href="#h-265">4.2.2视频硬编码H.265</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id45">4.3 视频硬解码</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#h264">4.3.1解码并播放H264格式视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id46">4.3.2解码并播放H264格式视频带音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#h265">4.3.3解码并播放H265格式视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id47">4.3.4解码并播放H265格式视频带音频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vp9">4.3.5 解码并播放 VP9 格式视频</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id48">4.3.6 解码并播放 VP9 格式视频带音频</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id49">4.4 摄像头测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#uvc-camera">4.4.1 UVC Camera测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id50"><strong>4.4.1.1摄像头识别检测和格式支持查询</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id51"><strong>4.4.1.2摄像头采集格式查询和修改</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id52"><strong>4.4.1.3摄像头图像预览和拍照</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ov13855">4.4.2  OV13855测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id53">**4.4.2.1 摄像头识别检测和格式支持查询 **</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id54"><strong>4.4.2.2 摄像头预览</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id55"><strong>4.4.2.3 摄像头拍照</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#ov5645">4.2.3 OV5645 测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id56"><strong>4.2.3.1、摄像头识别检测</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id57"><strong>4.2.3.2、查看支持格式</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#id58"><strong>4.2.3.3、摄像头预览</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#id59">05_烧写系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#otg">5.1 OTG烧写系统</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id60">5.1.1 OTG驱动安装</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id61">5.1.2 OTG完全烧写测试</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rkdevtool"><strong>5.1.2.1 RKDevTool烧写测试</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id62">5.2 TF 卡烧写系统</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html">0 OK3576-C_硬件手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#fet3576-c">第二章  FET3576-C核心板介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#id22">第三章 OK3576-C嵌入式开发平台介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#rk3576">01_RK3576简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#id35">02_FET3576-C核心板介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#id71">03_OK3576-C嵌入式开发平台介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#id98">04_硬件设计指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#id99">05_连接器尺寸图</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#id100">06_OK3576-C开发板整机功耗表</a></li>
<li class="toctree-l1"><a class="reference internal" href="OK3576-C_hardware.html#id101">07_最小系统原理图</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ROCKCHIP RK3576 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">00 OK3576-C_Linux6.1.84_用户使用手册</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ok3576-c-linux6-1-84">
<h1>00 OK3576-C_Linux6.1.84_用户使用手册<a class="headerlink" href="#ok3576-c-linux6-1-84" title="Link to this heading"></a></h1>
<p>版本：V1.0<br />
发布日期：2025.01.23<br />
文件密级：□绝密 □秘密 □内部资料 ■公开免责声明</p>
</section>
<section id="id1">
<h1>免责声明<a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
<p>本手册版权归保定飞凌嵌入式技术有限公司所有。未经本公司的书面许可，任何单位和个人无权以任何形式复制、传播、转载本手册的任何部分，违者将被追究法律责任。</p>
<p>保定飞凌嵌入式有限公司所提供的所有服务内容旨在协助用户加速产品的研发进度，在服务过程中所提供的任何程序、文档、测试结果、方案、支持等资料和信息，都仅供参考，用户有权不使用或自行参考修改，本公司不提供任何的完整性、可靠性等保证，若在用户使用过程中因任何原因造成的特别的、偶然的或间接的损失，本公司不承担任何责任。</p>
</section>
<section id="id2">
<h1>概述<a class="headerlink" href="#id2" title="Link to this heading"></a></h1>
<p><font style="color:#333333;">本手册以使用户快速熟悉产品，了解接口功能和测试方法为目的，主要讲述了开发板接口功能的测试，烧写镜像方法，以及使用过程中出现的一些问题如何排查。在测试过程中，对一些命令进行了注释，方便</font>用户理解，以实用够用为主。涉及到内核编译、相关应用编译方法，开发环境搭建等请参考飞凌提供的《OK3576-C Linux用户编译手册》</p>
<p>本手册一共分为6部分：</p>
<ul class="simple">
<li><p>第一部分产品的整体概述，简单介绍了开发板在接口资源、内核源码中相关驱动路径、开发板支持的烧写和启动方式，以及资料中重点部分的说明；</p></li>
<li><p>第二部分产品的快速开机启动，可采用串口登录和网络登录两种方式；</p></li>
<li><p>第三部分产品的桌面功能及QT界面功能测试；</p></li>
<li><p>第四部分产品的命令行操作进行功能测试；</p></li>
<li><p>第五部分产品的多媒体测试，包括了摄像头的播放测试以及视频硬件编解码测试；</p></li>
<li><p>第六部分产品的镜像更新，主要描述更新镜像到存储设备的方法，用户可根据实际情况选择对应的烧录方式。</p></li>
</ul>
<p>本手册中一些符号及格式的相关说明：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>表现形式</strong></p></th>
<th class="head"><p><strong>含义</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>⁉️</p></td>
<td><p>注意或者是需要特别关注的信息，一定要仔细阅读</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>📚</p></td>
<td><p>对测试章节做的相关说明</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>🛤️</p></td>
<td><p>表示相关路径</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><font style="color:blue;background-color:#d7d7d7;">灰底蓝色</font></p></td>
<td><p>指在命令行输入的命令，需要手动输入</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><font style="color:black;background-color:#d7d7d7;">灰底黑色字体</font></p></td>
<td><p>输入命令后的串口输出信息</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><strong><font style="color:black;background-color:#d7d7d7;">灰底黑色加粗</font></strong></p></td>
<td><p>串口输出信息中的关键信息</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>//</p></td>
<td><p>对输入指令或输出信息的解释内容</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>用户名&#64;主机名</p></td>
<td><p>root&#64;rk3576-buildroot: 开发板串口登录账户信息   forlinx&#64;ok3576：开发板远程登录账户信息，   forlinx&#64;Linux：开发环境Linux账户信息   用户可通过该信息确定功能操作的环境</p></td>
</tr>
</tbody>
</table>
<p>例：查看NXP AW9098模块驱动的加载状态：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@rk3576-buildroot:~$ lsmod                                         //View loaded modules
Module                  Size  Used by
moal                  602112  0
mlan                  466944  1 moal
</pre></div>
</div>
<ul class="simple">
<li><p>root&#64;rk3576-buildroot：用户名为root，主机名为forlinx，表示在开发板上使用root用户进行操作。</p></li>
<li><p>// ：对指令操作或打印信息的解释内容，不需要输入。</p></li>
<li><p><font style="color:blue;background-color:#e5e5e5;">lsmod</font>：灰底蓝色字体，表示需要手动输入的相关命令。</p></li>
<li><p><strong><font style="color:red;background-color:#e5e5e5;">moal                  602112  0</font></strong>：灰底黑色字体为输入命令后的输出信息，加粗字体为关键信息，在此处表示已加载NXP AW9098模块驱动。</p></li>
</ul>
</section>
<section id="id3">
<h1>适用范围<a class="headerlink" href="#id3" title="Link to this heading"></a></h1>
<p>本文主要适用于飞凌OK3576-C平台Linux6.1.84操作系统，其他平台也可以参考，但是不同平台之间会存在差异，需客户自行修改以适应自己的使用。</p>
</section>
<section id="id4">
<h1>更新记录<a class="headerlink" href="#id4" title="Link to this heading"></a></h1>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>日期</strong></p></th>
<th class="head text-center"><p><strong>手册版本</strong></p></th>
<th class="head text-center"><p><strong>核心板版本</strong></p></th>
<th class="head text-center"><p><strong>底板版本</strong></p></th>
<th class="head"><p><strong>更新内容</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>20250123</p></td>
<td class="text-center"><p>V1.0</p></td>
<td class="text-center"><p>V1.1</p></td>
<td class="text-center"><p>V1.1及其以上版本</p></td>
<td><p>OK3576-C Linux6.1.84软件手册初版</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ok3576">
<h1>01_OK3576开发板介绍<a class="headerlink" href="#ok3576" title="Link to this heading"></a></h1>
<section id="id5">
<h2>1.1 OK3576开发板简介<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p>RK3576是基于ARM64架构的低功耗高性能处理器，它包括4核Cortex-A53和4核Conrtex-A72以及独立的NEON协处理器和神经网络加上处理器NPU，可应用于计算机、手机、个人移动互联网，数字多媒体设备。</p>
<p>飞凌OK3576-C开发平台核心板和底板采用接插件的连接方式。</p>
<ul class="simple">
<li><p><strong>请阅读：</strong></p></li>
</ul>
<p>本软件手册中不再对硬件参数进行叙述，在参考本手册进行软件开发前请阅读“OK3576-C _硬件手册”，以了解产品命名规则和您所使用产品的硬件配置信息，这样有助于您对本产品的使用。</p>
</section>
<section id="linux-6-1-84">
<h2>1.2 Linux 6.1.84系统软件资源介绍<a class="headerlink" href="#linux-6-1-84" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>设备</strong></p></th>
<th class="head"><p><strong>驱动程序源代码在内核中的位置</strong></p></th>
<th class="head"><p><strong>设备名</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LCD 背光驱动</p></td>
<td><p>drivers/video/backlight/pwm_bl.c</p></td>
<td><p>/sys/class/backlight</p></td>
</tr>
<tr class="row-odd"><td><p>USB接口U盘</p></td>
<td><p>drivers/usb/storage/</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>USB鼠标</p></td>
<td><p>drivers/hid/usbhid/</p></td>
<td><p>/dev/input/mice</p></td>
</tr>
<tr class="row-odd"><td><p>以太网</p></td>
<td><p>drivers/net/ethernet/stmicro/stmmac</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>SD/micro TF卡驱动</p></td>
<td><p>drivers/mmc/host/dw_mmc-rockchip.c</p></td>
<td><p>/dev/block/mmcblk1pX</p></td>
</tr>
<tr class="row-odd"><td><p>EMMC驱动</p></td>
<td><p>drivers/mmc/host/dw_mmc-rockchip.c</p></td>
<td><p>/dev/block/mmcblk2pX</p></td>
</tr>
<tr class="row-even"><td><p>OV13850</p></td>
<td><p>drivers/media/i2c/ov13855.c</p></td>
<td><p>/dev/videoX</p></td>
</tr>
<tr class="row-odd"><td><p>LCD 控制器</p></td>
<td><p>drivers/gpu/drm/rockchip/rockchip_drm_vop.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>MIPI CSI</p></td>
<td><p>drivers/phy/rockchip/phy-rockchip-mipi-rx.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>MIPI DSI</p></td>
<td><p>drivers/phy/rockchip/phy-rockchip-inno-mipi-dphy.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>LCD触摸驱动</p></td>
<td><p>drivers/input/touchscreen/gt9xx/*   drivers/input/touchscreen/edt-ft5x06.c</p></td>
<td><p>/dev/input/eventX</p></td>
</tr>
<tr class="row-odd"><td><p>RTC实时时钟驱动</p></td>
<td><p>drivers/rtc/rtc-rx8010.c   drivers/rtc/rtc-pcf8563.c</p></td>
<td><p>/dev/rtc0</p></td>
</tr>
<tr class="row-even"><td><p>串口</p></td>
<td><p>drivers/tty/serial/8250/8250_dw.c</p></td>
<td><p>/dev/ttySX</p></td>
</tr>
<tr class="row-odd"><td><p>按键驱动</p></td>
<td><p>drivers/input/keyboard/adc-keys.c</p></td>
<td><p>/dev/input/eventX</p></td>
</tr>
<tr class="row-even"><td><p>LED</p></td>
<td><p>drivers/leds/leds-gpio.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>I2S</p></td>
<td><p>sound/soc/rockchip/rockchip_i2s.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>音频驱动</p></td>
<td><p>sound/soc/codecs/nau8822.c</p></td>
<td><p>/dev/snd/</p></td>
</tr>
<tr class="row-odd"><td><p>PMIC</p></td>
<td><p>drivers/mfd/rk806.c   drivers/regulator/rk860x-regulator.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>PCIE</p></td>
<td><p>drivers/pci/controller/pcie-rockchip.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>看门狗</p></td>
<td><p>drivers/watchdog/dw_wdt.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>SPI</p></td>
<td><p>drivers/spi/spi-rockchip.c</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>PWM</p></td>
<td><p>drivers/video/backlight/pwm_bl.c</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="emmc">
<h2>1.3 eMMC存储器分区表<a class="headerlink" href="#emmc" title="Link to this heading"></a></h2>
<p>下面表格是Linux操作系统的eMMC存储器分区信息（计算时一个块大小为512bit）：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>分区索引</strong></p></th>
<th class="head"><p><strong>名称</strong></p></th>
<th class="head"><p><strong>偏移/block</strong></p></th>
<th class="head"><p><strong>大小/block</strong></p></th>
<th class="head"><p><strong>内容</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>N/A</p></td>
<td><p>security</p></td>
<td><p>0x00000000</p></td>
<td><p>0x00004000</p></td>
<td><p>MiniLoaderAll.bin</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>uboot</p></td>
<td><p>0x00004000</p></td>
<td><p>0x00004000</p></td>
<td><p>uboot.img</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>misc</p></td>
<td><p>0x00006000</p></td>
<td><p>0x00002000</p></td>
<td><p>misc.img</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>boot</p></td>
<td><p>0x00008000</p></td>
<td><p>0x00020000</p></td>
<td><p>boot.img</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>recovery</p></td>
<td><p>0x00028000</p></td>
<td><p>0x00040000</p></td>
<td><p>recovery.img</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>backup</p></td>
<td><p>0x00068000</p></td>
<td><p>0x00010000</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>rootfs</p></td>
<td><p>0x00078000</p></td>
<td><p>0x01c00000</p></td>
<td><p>rootfs.img</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>oem</p></td>
<td><p>0x01c78000</p></td>
<td><p>0x00040000</p></td>
<td><p>oem.img</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>userdata</p></td>
<td><p>0x01cb8000</p></td>
<td><p>grow</p></td>
<td><p>userdata.img</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id6">
<h1>02_快速开机启动<a class="headerlink" href="#id6" title="Link to this heading"></a></h1>
<section id="id7">
<h2>2.1 开机前的准备<a class="headerlink" href="#id7" title="Link to this heading"></a></h2>
<p>OK3576开发板有串口登录方式，系统开机前硬件准备：</p>
<ul class="simple">
<li><p>12V-3A DC电源线</p></li>
<li><p>调试串口线（串口登录使用）</p></li>
</ul>
<p>开发板上的调试串口为Type-C USB插孔，用户可以使用USB转Type-C线连接开发板和PC机，以便查看开发板状态。</p>
<ul class="simple">
<li><p>屏幕，根据开发板接口连接屏幕（不需要显示的可以不接）</p></li>
</ul>
</section>
<section id="id8">
<h2>2.2 调试串口驱动安装<a class="headerlink" href="#id8" title="Link to this heading"></a></h2>
<p>OK3576-C平台调试串口使用的是Type-C接口，板载USB转UART芯片，无需客户购买USB转串口调试工具，使用极其简单方便。</p>
<p>安装驱动请使用用户资料\Linux\工具\目录下提供的驱动包DriverAssitant_v5.1.1.zip进行装。</p>
<p>解压完成后直接运行DriverInstall.exe，为确保安装最新的驱动，请先点击驱动卸载，再驱动安装。</p>
</section>
<section id="id9">
<h2>2.3 串口登录方式<a class="headerlink" href="#id9" title="Link to this heading"></a></h2>
<section id="id10">
<h3>2.3.1 串口连接设置<a class="headerlink" href="#id10" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>说明：</strong></p></li>
<li><p><strong>串口设置：波特率115200、数据位8、停止位1、无校验位、无流控制</strong></p></li>
<li><p><strong>软件需求：PC端Windows系统需要安装超级终端软件，超级终端软件有多种，可自行使用自己熟悉的串口终端软件</strong></p></li>
</ul>
<p>以下我们以putty终端软件为例介绍串口的登录方式：</p>
<p>**步骤1：**首先需要确认连接电脑的串口端口号，从设备管理器中查看串口端口号，以电脑实际识别的端口号为准。</p>
<p><img alt="Image" src="_images/e2277f30f4604c2b8965b807e4ac62ef.png" /></p>
<p>**步骤2：**打开putty并设置，serial line根据使用的电脑COM口设置，波特率115200</p>
<p><img alt="Image" src="_images/9bb8a98b75fb4a89bba4b1acbe4a0c5c.png" /></p>
<p>**步骤3：**上述设置完成后可以在Saved Sessions输入电脑使用的COM口，下图以COM3为例，将设置保存，之后再打开串口时，直接点击保存的端口号即可。</p>
<section id="id11">
<h4><img alt="Image" src="_images/e2882ae81022497a95eaaa583a02e011.png" /><a class="headerlink" href="#id11" title="Link to this heading"></a></h4>
<p>**步骤4：**打开开发板的电源开关，串口会有打印信息输出，用户名forlinx，密码forlinx（无root权限），如果需要使用root登录则用户名和密码分别为root，root。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>input-event-daemon: Adding device: /dev/input/event9...
input-event-daemon: Start listening on 12 devices...
done
root@rk3576-buildroot:/# [   37.424104] vbus5v0_typec0: disabling
[   37.424151] vbus5v0_typec1: disabling

ok3576-buildroot login: forlinx
Password:
forlinx@ok3576-buildroot:~$
</pre></div>
</div>
</section>
</section>
<section id="id12">
<h3>2.3.2 串口登录常见问题<a class="headerlink" href="#id12" title="Link to this heading"></a></h3>
<p>电脑端口没有串口的可以通过USB转串口线与开发板连接，使用USB转串口线接需要安装对应的驱动程序。</p>
<p>建议使用质量好串口线以避免出现乱码情况。</p>
</section>
</section>
<section id="id13">
<h2>2.4 系统关闭<a class="headerlink" href="#id13" title="Link to this heading"></a></h2>
<p>一般情况下直接关闭电源即可，如果有数据存储、功能使用等操作，操作过程中不要随意断电，以防出现文件不可逆损坏，只能重新烧写固件。未确保数据完全写入，可输入 sync 命令完成数据同步后再关闭电源。</p>
</section>
</section>
<section id="id14">
<h1>03_OK3576平台界面功能使用及测试<a class="headerlink" href="#id14" title="Link to this heading"></a></h1>
<p><font style="color:#000000;">OK3576</font>平台<font style="color:#000000;">对Qt的支持非常完善</font>，下面是演示桌面。</p>
<section id="id15">
<h2>3.1 桌面功能测试<a class="headerlink" href="#id15" title="Link to this heading"></a></h2>
<section id="id16">
<h3>3.1.1  界面功能简介<a class="headerlink" href="#id16" title="Link to this heading"></a></h3>
<p>开发板启动后桌面显示如下：</p>
<p><img alt="Image" src="_images/cb589c33ad7c442392a9ae02f7955765.png" /></p>
</section>
<section id="id17">
<h3>3.1.2  浏览器测试<a class="headerlink" href="#id17" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">“DemoBrowser”是一款简单实用的网络浏览器，在使用时请保证网络通畅，访问外网前需保证dns可用，浏览器启动时默认访问飞凌嵌入式官方网站。</font></p>
<p><img alt="Image" src="_images/2771740fda634879991303ba40e64139.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/0fc0310421a841cc91fbdd11c845aad2.png" /><font style="color:#000000;">注意：如果开发板的时间异常会导致证书问题。使用浏览器后不可以立即关闭电源或者在关闭电源前在命令行使用sync命令，否则可能导致浏览器异常退出，无法正常运行，只能重新烧录解决。</font></p>
<p><font style="color:#000000;">界面如下：</font></p>
<p><img alt="Image" src="_images/b3d557213e494bafb4b86415384ef5af.png" /></p>
<p><font style="color:#000000;">通过上方导航栏 File-&gt;Quit 退出该浏览器。</font></p>
</section>
<section id="id18">
<h3>3.1.3  播放音乐测试<a class="headerlink" href="#id18" title="Link to this heading"></a></h3>
<p>“<font style="color:#000000;">musicplayer”</font>是一款简单的音频测试应用，可用来测试声卡功能是否正常，也可用来作为一款简单的音频播放器。</p>
<p><img alt="Image" src="_images/b80f741f452d458d8b73d80b67053e45.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/710720e817514c57b4cb7c801412097f.png" /></p>
<p><font style="color:#000000;">点击左下角的按钮，选择测试音频 /userdata/piano2-CoolEdit.mp3。</font></p>
</section>
<section id="id19">
<h3>3.1.4  播放视频测试<a class="headerlink" href="#id19" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">点击桌面图标进入打开视频播放器qplayer。</font></p>
<p><img alt="Image" src="_images/4c65bcfc52684aa09b4e5d9913205fc3.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/40aa5a3fc5e1479f9558d3a78ec57c54.png" /></p>
<p><img alt="Image" src="_images/3e037ce16b1a4f20b5b015b80728f417.png" /> <strong><font style="color:#000000;">注意：测试视频文件所在目录：</font></strong><font style="color:#000000;">/media/forlinx/video/*.mp4</font></p>
</section>
<section id="g-5g">
<h3>3.1.5  4G/5G 测试<a class="headerlink" href="#g-5g" title="Link to this heading"></a></h3>
<p><img alt="Image" src="_images/150b5f1d396b45b4bf8603973e783ed9.png" /> 注意：此测试需要插入可上网的<font style="color:#000000;">SIM</font>卡，具体操作描述可以参考本手册的命令行功能测试<font style="color:#000000;">5G</font>章节。</p>
<p><font style="color:#000000;">“4G/5G”测试程序用于测试OK3576外置5G模块(RM500U)。测试前请将开发板断电，接入5G模块，插入SIM卡，启动开发板打开测试应用。</font></p>
<p><font style="color:#000000;">同时该测试支持4G模组（EM05-CE），在断电情况下插入4G模组和SIM卡，上电系统启动后打开测试应用。</font></p>
<p><img alt="Image" src="_images/90283dfc46f24a8693d8f0620660106c.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/fe39daaa66ac43789bda993ee8294768.png" /></p>
<p><font style="color:#000000;">点击Start按钮，程序将自动进入拨号流程并获取IP设置DNS等，耐心等待几秒钟后，当屏幕输出IP地址后，退出当前应用。进入DemoBrowser网络浏览器进行测试，若打开应用能够正常访问飞凌嵌入式官方网站，说明此时已连接成功。</font></p>
</section>
<section id="id20">
<h3>3.1.6  看门狗测试<a class="headerlink" href="#id20" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">“WatchDog”是用来测试看门狗功能是否正常的应用</font></p>
<p><img alt="Image" src="_images/74c9df3e06024147b1cca78adc7a5c61.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/4d39d3e9aa5a43238c0ee6d3c8ff0a3f.png" /></p>
<p><font style="color:#000000;">点击start，默认打开喂狗功能，定时喂狗，此时系统不会重启。取消勾选 </font>feed dog<font style="color:#000000;">时，倒计时</font>10s<font style="color:#000000;">，系统进入重启。说明看门狗功能正常。</font></p>
</section>
<section id="id21">
<h3>3.1.7  串口测试<a class="headerlink" href="#id21" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">点击桌面图标可以使用它来测试OK3576板载UART接口。</font></p>
<p><img alt="Image" src="_images/11c45bee6ecb49938d4ec9a0ac17a51e.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/3fe6406d950340efa055282f3bdbd8c9.png" /></p>
<p>界面展示</p>
<p><font style="color:#000000;">OK3576平台底板原理图中标示引出的 UART0、UART4、UART5、UART6共4路串口，其中UART0为调试串口，UART4为蓝牙串口，UART5、UART6为485串口。</font></p>
<p><font style="color:#000000;">测试使用UART5、UART6两路RS485对测，测试前需要连接好两路RS485接口A、B引脚，A接A，B接B。两路RS485的底板接口如下：</font></p>
<p><img alt="Image" src="_images/fa0dbbafc7474962862829af59f43202.png" /></p>
<p>测试方法：</p>
<p>在界面中设置<font style="color:#000000;">ttyS6</font>，波特率<font style="color:#000000;">9600</font>，<font style="color:#000000;">8</font>位数据位，<font style="color:#000000;">1</font>位停止位。最后点击<font style="color:#000000;">open</font>按钮。</p>
<p><img alt="Image" src="_images/3a35164e683b4c99887dcb0951b95a68.png" /></p>
<p>并且使用串口登录到开发板，在串口终端中输入<font style="color:#000000;">echo “forlinx_uart_test.1234567890…” &gt; /dev/ttyS5</font>。<font style="color:#000000;">测试界面会接收到数据：</font></p>
<p><img alt="Image" src="_images/56ab484cf51f440eab6de99b08f789f0.png" /></p>
<p>在串口终端输出<font style="color:#000000;">cat  /dev/ttyS5</font>，再页面中<font style="color:#000000;">点击send下的输入框，使用键盘输入“abcdefg”，点击send。此时ttyS5可以收到消息。</font></p>
<p><img alt="Image" src="_images/3cc0008994c74f31b058143861a549f5.png" /></p>
</section>
<section id="id22">
<h3>3.1.8  背光测试<a class="headerlink" href="#id22" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">“BackLight”是lcd背光调整应用：</font></p>
<p><img alt="Image" src="_images/bcbdb36a618548fabefbcc14ebce017b.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/eaeb0450b2474a59890e7fe5e532e70a.png" /></p>
<p>应用界面</p>
<p><font style="color:#000000;">拖动界面中的滑块即可设置lcd背光亮度。</font></p>
</section>
<section id="id23">
<h3>3.1.9  按键测试<a class="headerlink" href="#id23" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">“Keypad”用于测试平台自带按键是否可用：</font></p>
<p><img alt="Image" src="_images/9a47e29ce79246a9ad17e8ee94d589f0.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/ea621e14d93445f2bc8210b11e44676d.png" /></p>
<p><font style="color:#000000;">OK3576平台默认将4个物理按键 V+、V-、MENU、ESC 分别配置为音量+键、音量-键，Menu、返回键。当按下按键时测试应用中的对应按键会变为蓝色，说明按键功能正常。</font></p>
</section>
<section id="rtc">
<h3>3.1.10  RTC测试<a class="headerlink" href="#rtc" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">通过“RTC”应用，可查看和设置当前的系统时间：</font></p>
<p><img alt="Image" src="_images/c20b7acc55c045d7b50a3149c846ea40.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/d0707edd590d4183a9ecdc06b348e84e.png" /></p>
<p><font style="color:#000000;">选择 Manual 之后，可手动设置时间，选择 date 和 time，点击 apply，设置完成，安装好 RTC 备用电池的情况下，时间断电重启不丢失。</font></p>
<p><font style="color:#000000;">点击 Auto，网络对时，点击 apply，对时成功。</font></p>
</section>
<section id="id24">
<h3>3.1.11  网络配置测试<a class="headerlink" href="#id24" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">OK3568可通过“Network”网络配置应用来选择 dhcp 和 static 两种模式，static 模式可配置 ip 地址、子网掩码、网关、DNS。</font></p>
<p><img alt="Image" src="_images/722a1602c466446c9b06565a0da24c53.png" /></p>
<p><font style="color:#000000;">应用图标</font></p>
<p><font style="color:#000000;">选中eth0或者eth1，再选中DHCP，点击界面下方“应用”，即可重启网络并自动获取到ip。</font></p>
<p><font style="color:#000000;">点击STATIC，选择设置静态IP，在ip栏中输入要设定的ip，netmask栏中输入子网掩码，geteway </font></p>
<p><font style="color:#000000;">栏中输入网关，dns栏中输入DNS。</font></p>
<p><font style="color:#000000;">输入网址，点击ping键后，左侧提示框中会提示ping的结果，如下：</font></p>
<p><img alt="Image" src="_images/42a916f18e9e44f6b6e9459b1193a296.png" /></p>
<p><font style="color:#000000;">注：在STATIC模式下设置的ip等信息会被保存至系统的相关配置文件中，因此每次重启都会使用本次设置的网络信息；而在DHCP模式下配置的网络信息则不需注意这一点，每次重新启动都会动态分配一次ip地址。</font></p>
</section>
<section id="id25">
<h3>3.1.12  数据库测试<a class="headerlink" href="#id25" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">点击桌面图标可以使用Sqlite测试数据库。</font></p>
<p><img alt="Image" src="_images/c6117ccb434943f0a2b94dce83d63b3f.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/9eec2afa69fb475e8c482d07a32cbf70.png" /></p>
</section>
<section id="id26">
<h3>3.1.13  系统信息测试<a class="headerlink" href="#id26" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">点击桌面图标可以显示系统相关信息。</font></p>
<p><img alt="Image" src="_images/637e2d41ae394173b3d62e064206ac66.png" /></p>
<p>应用图标</p>
<p><img alt="Image" src="_images/3ccdd89b058f4c5dbd509d1df40873c6.png" /></p>
</section>
</section>
<section id="id27">
<h2>3.2 命令行功能测试<a class="headerlink" href="#id27" title="Link to this heading"></a></h2>
<p>OK3576平台内置了丰富的命令行工具可供用户使用。</p>
<section id="id28">
<h3>3.2.1  系统信息查询<a class="headerlink" href="#id28" title="Link to this heading"></a></h3>
<p>查看内核和cpu信息，输入如下命令</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# uname -a
Linux ok3576-buildroot 6.1.75 #4 SMP Wed Jul 24 09:06:40 CST 2024 aarch64 GNU/Linux
</pre></div>
</div>
<p>查看操作系统信息：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cat /etc/issue
Welcome to RK3576 Buildroot
</pre></div>
</div>
<p>查看环境变量信息：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# env
SHELL=/bin/sh
GST_V4L2_PREFERRED_FOURCC=NV12:YU12:NV16:YUY2
GST_VIDEO_CONVERT_PREFERRED_FORMAT=NV12:NV16:I420:YUY2
CHROMIUM_FLAGS=--enable-wayland-ime
GST_V4L2_USE_LIBV4L2=1
WESTON_DRM_MIN_BUFFERS=2
WL_OUTPUT_VERSION=3
GST_INSPECT_NO_COLORS=1
PULSE_HOME=/userdata/.pulse
EDITOR=/bin/vi
WESTON_DRM_KEEP_RATIO=1
GST_DEBUG_NO_COLOR=1
PWD=/
HOME=/
LANG=en_US.UTF-8
ADB_TCP_PORT=5555
WESTON_FREEZE_DISPLAY=/tmp/.freeze_weston
WAYLANDSINK_FORCE_DMABUF=1
GST_V4L2SRC_DEFAULT_DEVICE=/dev/video-camera0
QT_QPA_PLATFORM=wayland
USB_FW_VERSION=0x0310
TERM=vt102
USER=root
AUTOAUDIOSINK_PREFERRED=pulsesink
ADBD_SHELL=/bin/bash
GST_V4L2SRC_RK_DEVICES=_mainpath:_selfpath:_bypass:_scale
WESTON_DRM_MIRROR=1
SHLVL=1
USB_FUNCS=adb
WESTON_DISABLE_ATOMIC=1
USB_MANUFACTURER=Rockchip
USB_PRODUCT=rk3xxx
XDG_RUNTIME_DIR=/var/run
USB_VENDOR_ID=0x2207
PLAYBIN2_PREFERRED_AUDIOSINK=pulsesink
PATH=/usr/bin:/usr/sbin
storagemedia=emmc
GST_V4L2SRC_MAX_RESOLUTION=3840x2160
GST_VIDEO_DECODER_QOS=0
_=/usr/bin/env
</pre></div>
</div>
</section>
<section id="id29">
<h3>3.2.2  调频测试<a class="headerlink" href="#id29" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>说明：四核A53分别是cpu0、cpu1、cpu2、cpu3; 四核A72分别是cpu5、cpu6、cpu7、cpu8。此过程以cpu0为例操作，实际过程cpu1、cpu2、cpu3会同时改变； 操作cpu4， cpu5、cpu6、cpu7也会同时改变。</strong></p></li>
</ul>
<p>当前内核中支持的所有cpufreq governor类型：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors
interactive conservative ondemand userspace powersave performance schedutil
</pre></div>
</div>
<p>其中userspace表示用户模式，在此模式下允许其他用户程序调节CPU频率。</p>
<p>查看当前CPU支持的频率档位</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
408000 600000 816000 1008000 1200000 1416000 1608000 1800000 2016000
</pre></div>
</div>
<p>设置为用户模式，修改频率为2016000：</p>
<p>查看修改前当前频率：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
1416000
</pre></div>
</div>
<p>修改频率：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# echo userspace &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
root@ok3576-buildroot:/# echo 2016000&gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed
</pre></div>
</div>
<p>查看修改后当前频率：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq
2016000
</pre></div>
</div>
</section>
<section id="id30">
<h3>3.2.3  温度测试<a class="headerlink" href="#id30" title="Link to this heading"></a></h3>
<p>查看温度值：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cat /sys/class/thermal/thermal_zone0/temp
45307
</pre></div>
</div>
<p>温度值即为45.3℃。</p>
</section>
<section id="ddr">
<h3>3.2.4  DDR测试<a class="headerlink" href="#ddr" title="Link to this heading"></a></h3>
<p>使用memtester做内存压力测试。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# memtester 100M 1
memtester version 4.5.1_20231020 (32-bit)
Copyright (C) 2001-2020 Charles Cazabon.
Licensed under the GNU General Public License version 2 (only).

pagesize is 4096
pagesizemask is 0xfffffffffffff000
want 100MB (104857600 bytes)
got  100MB (104857600 bytes), trying mlock ...locked.
testing from phyaddress:0x4fc3c000
get chip name: (null)
get ddr bw: (null)
io bw x32
Loop 1/1:
  Stuck Address       : ok
  Random Value        : ok
  Compare XOR         : ok
  Compare SUB         : ok
  Compare MUL         : ok
  Compare DIV         : ok
  Compare OR          : ok
  Compare AND         : ok
  Sequential Increment: ok
  Solid Bits          : ok
  Block Sequential    : ok
  Checkerboard        : ok
  Bit Spread          : ok
  Bit Flip            : ok
  Walking Ones        : ok
  Walking Zeroes      : ok
  8-bit Writes        : ok
  16-bit Writes       : ok


*************************************************************
memtester result:
Log: had found 0 failures.

Status: PASS.

*************************************************************
</pre></div>
</div>
</section>
<section id="id31">
<h3>3.2.5  看门狗测试<a class="headerlink" href="#id31" title="Link to this heading"></a></h3>
<p>看门狗是嵌入式系统中经常用到的功能，OK3576中看门狗的设备节点为/dev/watchdog 。本测试提供了两种测试程序，用户根据实际情况选择一种测试。</p>
<ul class="simple">
<li><p>启动看门狗，设置复位时间10s，并定时喂狗</p></li>
</ul>
<p>使用fltest_watchdog，此命令会打开看门狗并执行喂狗操作，因此系统不会重启</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# fltest_watchdog
Watchdog Ticking Away!
</pre></div>
</div>
<p>使用ctrl+c结束测试程序时，停止喂狗，看门狗处于打开状态，10s后系统复位;</p>
<p>若不想复位，请在结束程序之后10s内输入关闭看门狗命令：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# fltest_watchdog -d                                          //Turn off the watchdog
</pre></div>
</div>
<ul class="simple">
<li><p>启动看门狗，设置复位时间10s，不喂狗</p></li>
</ul>
<p>执行命令fltest_watchdogrestart, 此命令会打开看门狗，但不执行喂狗操作，系统会在10s后重启。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# fltest_watchdogrestart
</pre></div>
</div>
</section>
<section id="id32">
<h3>3.2.6  RTC功能测试<a class="headerlink" href="#id32" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>注意：确保板子上已经安装了纽扣电池，并且电池电压正常</strong></p></li>
</ul>
<p><font style="color:#000000;">RTC 测试，主要通过使用 date 和 hwclock 工具设置软、硬件时间，测试当板子断电再上电的时候，软件时钟读取 RTC 时钟是否同步</font></p>
<p>时间设置</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# date -s &quot;2022-12-12 17:23:00&quot;       //Set software time
Mon Dec 12 17:23:00 UTC 2022
root@ok3576-buildroot:/# hwclock -wu				        //Synchronize software time to hardware time
root@ok3576-buildroot:/# hwclock -r					        //Display the hardware time
Mon Dec 12 17:23:26 2022  0.000000 seconds
</pre></div>
</div>
<p>然后给板子断电再上电，进入系统后读取系统时间，可以看到时间已经同步。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@rk3576-buildroot:/# date
Mon Dec 12 17:23:50 UTC 2022
</pre></div>
</div>
</section>
<section id="id33">
<h3>3.2.7  按键测试<a class="headerlink" href="#id33" title="Link to this heading"></a></h3>
<p>使用fltest_keytest命令行工具进行按键测试，目前fltest_keytest支持底板上4个按键VOL+、VOL-、MENU、ESC的测试，键码分别为115、114、139、158</p>
<p>执行如下命令：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# fltest_keytest
</pre></div>
</div>
<p>此时依次按下抬起按键，终端上可输出如下内容：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>key115 Presse                                                         // VOL+presse
key115 Released                                                       // VOL+release
key114 Presse                                                         // VOL-presse
key114 Released                                                       // VOL-release
key139 Presse                                                         // MENU presse
key139 Released                                                       // MENU release
key158 Presse                                                          // ESC presse
key158 Released                                                        // ESC release
</pre></div>
</div>
</section>
<section id="id34">
<h3>3.2.8  以太网配置<a class="headerlink" href="#id34" title="Link to this heading"></a></h3>
<p>OK3576-C板载两个千兆网卡，插入网线连接网络的情况下，eth0默认配置了静态IP，eth1默认使用动态分配IP策略。</p>
<p>查看eth0、eth1配置文件， 配置文件的路径为：/etc/network/interfaces.d/eth0，设置静态ip的配置内容为：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>auto eth0
iface eth0 inet static
address 192.168.0.232
netmask 255.255.255.0
gateway 192.168.0.1
</pre></div>
</div>
<p>eth1配置文件的路径为：/etc/network/interfaces.d/eth1，动态分配配置内容为：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>auto eth1
iface eth1 inet dhcp
</pre></div>
</div>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>参数</strong></p></th>
<th class="head"><p><strong>含义</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>iface</p></td>
<td><p>用于指定需要固定IP的网卡</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>address</p></td>
<td><p>用于指定需要固定的IP地址</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>netmask</p></td>
<td><p>用于设置子网掩码</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>gateway</p></td>
<td><p>用于指定网关</p></td>
</tr>
</tbody>
</table>
<p>可以手动修改网卡配置，设置完后使用sync文件同步指令，重启开发板或者重启服务，配置生效。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# ifdown -a
root@ok3576-buildroot:/# ifup -a
</pre></div>
</div>
<p>打流测试</p>
<p><img alt="Image" src="_images/b812b1362db442a4ba63223022d3ab38.png" /></p>
</section>
<section id="uart-485">
<h3>3.2.9  UART 485测试<a class="headerlink" href="#uart-485" title="Link to this heading"></a></h3>
<p>OK3576平台底板原理图中标示引出的UART0、UART4、UART5、UART6共4路串口，其中UART0为调试串口，UART4为蓝牙串口，UART5、UART6为485串口。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-center"><p><strong>UART</strong></p></th>
<th class="head text-center"><p><strong>设备节点</strong></p></th>
<th class="head"><p><strong>说明</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p>UART0</p></td>
<td class="text-center"><p></p></td>
<td><p>调试串口，不能直接用于测试:</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>UART4</p></td>
<td class="text-center"><p>/dev/ttyS4</p></td>
<td><p>用于蓝牙，未单独引出，不能直接用于该测试</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p>UART5</p></td>
<td class="text-center"><p>/dev/ttyS5</p></td>
<td><p>RS485</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p>UART6</p></td>
<td class="text-center"><p>/dev/ttyS6</p></td>
<td><p>RS485</p></td>
</tr>
</tbody>
</table>
<p>测试使用UART5、UART6两路RS485对测，测试前需要连接好两路RS485接口A、B引脚，A接A，B接B。两路RS485的底板接口如下：</p>
<p><img alt="Image" src="_images/62fe5bd529ce453f966dada949156ff8.png" /></p>
<p>使用两路终端登录开发板，一路UART0 debug调试口，另一路使用SSH登录。</p>
<p>debug终端</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# echo 123456 &gt; /dev/ttyS5    //发送数据
root@ok3576-buildroot:/# cat /dev/ttyS5     //接收数据，当ttyS6发送数据的时候就可以接收到
111111
</pre></div>
</div>
<p>SSH终端</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:~# cat /dev/ttyS6     //接收数据，当ttyS5发送数据的时候就可以接收到
123456

root@ok3576-buildroot:~# echo 111111 &gt; /dev/ttyS6     //发送数据
</pre></div>
</div>
</section>
<section id="adc">
<h3>3.2.10  ADC测试<a class="headerlink" href="#adc" title="Link to this heading"></a></h3>
<p>OK3576-C开发板内部提供了8路ADC，在P18端口留出saradc2、 saradc4、saradc5、saradc6、saradc7通道，可以使用跳线帽连接旁边的可调电阻进行测试。ADC引脚硬件图如下，当前芯片使用1.8V参考电压对应 12 位ADC最大值4096。选择 saradc4进行测试，使用跳线帽连接P18端口的3、4引脚。</p>
<p><img alt="Image" src="_images/0c30d0aded4140aeaaa496e802c801ef.png" /></p>
<p>测试可调电阻数值</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cd /sys/bus/iio/devices/iio:device0
root@ok3576-buildroot:/sys/bus/iio/devices/iio:device0# cat in_voltage4_raw
1095
</pre></div>
</div>
</section>
<section id="tf">
<h3>3.2.11  TF卡测试<a class="headerlink" href="#tf" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>说明：</strong></p></li>
<li><p><strong>TF卡挂载目录为/mnt/sdcard/，支持热插拔。</strong></p></li>
</ul>
<p>1、上电前将TF卡插入开发板底板的TF卡插槽，上电启动，运行命令dmesg，终端有如下打印信息：</p>
<p><img alt="Image" src="_images/c664b3fe21084d7d85992eeb49db3c72.png" /></p>
<p>2、查看挂载目录：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/#  mount | grep &quot;mmcblk1p1&quot;
/dev/mmcblk1p1 on /mnt/sdcard type vfat (rw,nodev,noexec,noatime,nodiratime,fmask=0022,dmask=0022,codepage=936,iocharset=utf8,shortname=mixed,errors=remount-ro)
</pre></div>
</div>
<p>3、写入测试：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# dd if=/dev/zero of=/mnt/sdcard/test bs=1M count=100 conv=fsync
100+0 records in
100+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 4.4581 s, 23.5 MB/s
</pre></div>
</div>
<p>4、读取测试：</p>
<ul class="simple">
<li><p>**注意：**为确保数据准确，请重启开发板后测试读取速度。</p></li>
</ul>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# dd if=/mnt/sdcard/test of=/dev/null bs=1M
100+0 records in
100+0 records out
104857600 bytes (105 MB, 100 MiB) copied, 1.17886 s, 88.9 MB/s
</pre></div>
</div>
<p>5、TF卡使用完成后，在弹出TF卡前，需要使用umount卸载TF</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# umount /mnt/sdcard/test
</pre></div>
</div>
<ul class="simple">
<li><p><strong>注意：退出TF卡挂载路径后再插拔TF卡。</strong></p></li>
</ul>
</section>
<section id="id35">
<h3>3.2.12  eMMC 测试<a class="headerlink" href="#id35" title="Link to this heading"></a></h3>
<p>OK3576平台eMMC默认运行于HS400模式200MHz时钟，下面简单测试eMMC的读写速度，以读写ext4文件系统为例。</p>
<p>写入测试：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# dd if=/dev/zero of=/test bs=1M count=500 conv=fsync
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 2.81396 s, 186 MB/s
</pre></div>
</div>
<p>读取测试：</p>
<ul class="simple">
<li><p>**注意：**为确保数据准确，请重启开发板后测试读取速度。</p></li>
</ul>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# dd if=/test of=/dev/null bs=1M
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 1.99774 s, 262 MB/s
</pre></div>
</div>
</section>
<section id="usb">
<h3>3.2.13  USB鼠标测试<a class="headerlink" href="#usb" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">将USB鼠标接入OK3576平台的usb接口，使用dmesg命令， 串口终端的打印信息如下：</font></p>
<p><img alt="Image" src="_images/556d9d002631418f8313eac623091c54.png" /></p>
<p><font style="color:#000000;">此时在屏幕上出现箭头光标，鼠标已可正常使用。</font></p>
</section>
<section id="usb3-0">
<h3>3.2.14  USB3.0<a class="headerlink" href="#usb3-0" title="Link to this heading"></a></h3>
<p>OK3576底板使用USB3.0集线器分出3路USB3.0 host，可以连接USB鼠标、 USB键盘、U盘等设备， 并支持以上设备的热插拔。 这里用挂载U盘为例进行演示， 目前U盘测试支持到32G， 32G以上并未测试。</p>
<p>终端会打印关于U盘的信息，由于存在很多种U盘，显示的信息可能会有差别：</p>
<ol class="arabic simple">
<li><p>开发板启动后，连接USB接口u盘到开发板的USB host接口，默认log打印信息较低，不会有打印信息。可以使用dmesg命令查看，找到u盘相关信息</p></li>
</ol>
<p><img alt="Image" src="_images/671886f614fa43dcabe335fbacf9a1fb.png" /></p>
<ol class="arabic simple">
<li><p>查看挂载目录：</p></li>
</ol>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# mount | grep &quot;sda1&quot;
/dev/sda1 on /mnt/udisk type fuseblk (rw,nodev,noexec,noatime,user_id=0,group_id=0,allow_other,blksize=4096)
</pre></div>
</div>
<p>可以看到/mnt/udisk为USB存储设备的挂载路径</p>
<p>3、写入测试，写入速度受限于具体的存储设备：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# dd if=/dev/zero of=/mnt/udisk/test bs=1M count=500 conv=fsync
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 12.5819 s, 41.7 MB/s
</pre></div>
</div>
<p>4、读取测试：</p>
<ul class="simple">
<li><p>**注意：**为确保数据准确，请重启开发板后测试读取速度。</p></li>
</ul>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# dd if=/mnt/udisk/test of=/dev/null bs=1M
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 3.66646 s, 143 MB/s
</pre></div>
</div>
<p>5、U盘使用完成后，在拔出U盘前，需要使用umount卸载</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# umount /mnt/udisk
</pre></div>
</div>
<ul class="simple">
<li><p><strong>注意：退出U盘挂载路径后再插拔U盘。</strong></p></li>
</ul>
</section>
<section id="type-c">
<h3>3.2.15  TYPE-C 测试<a class="headerlink" href="#type-c" title="Link to this heading"></a></h3>
<p>OK3576-C包含1个TYPE-C接口，TYPE-C HOST/DEVICE模式自动识别。Device模式可以用它来进行刷机，ADB文件传输、调试，Host模式使用TYPE-C转Host线可以插入普通的USB 设备。</p>
<p>Device 模式<font style="color:#000000;">：</font></p>
<p><img alt="Image" src="_images/28bd722df2f44e7f8f277b7e00f4a327.png" /></p>
<p>Host模式：</p>
<p>接入U盘查看插入信息。</p>
<p><img alt="Image" src="_images/827c7321d7c64cf18168b3b267af2053.png" /></p>
</section>
<section id="wifi">
<h3>3.2.16  WIFI 测试<a class="headerlink" href="#wifi" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>说明：</strong></p></li>
<li><p><strong>由于网络环境的不同，所以在您做本实验时，请根据实际情况进行设置。</strong></p></li>
</ul>
<p>OK3576平台支持AW-CM358 WIFI蓝牙二合一模块。</p>
<p>STA 模式</p>
<p>该模式即作为一个站点，连接到无线网络中。以下测试中，路由器采用wpa加密方式，连接的wifi热点名称为：forlinx-wlan，密码为：fl03123102650。由于网络环境的不同，用户在进行本次测试时，请根据实际情况进行设置：</p>
<p>1、开发板终端中输入如下命令加载WiFi模块和固件：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# insmod /lib/modules/mlan.ko
root@ok3576-buildroot:/# insmod /lib/modules/moal.ko cal_data_cfg=none fw_name=sdiouart8987_combo_v0.bin sta_name=wlan cfg80211_wext=12
[   57.995938] wlan: Loading MWLAN driver
[   57.996950] wlan: Register to Bus Driver...
[   57.997104] vendor=0x02DF device=0x9149 class=0 function=1
[   57.997220] Attach moal handle ops, card interface type: 0x105
[   57.997235] rps set to 0 from module param
[   57.997244] No module param cfg file specified
[   57.997257] SDIO: max_segs=256 max_seg_size=4096
[   57.997266] rx_work=1 cpu_num=8
[   57.997274] Enable moal_recv_amsdu_packet
[   57.997301] Attach mlan adapter operations.card_type is 0x105.
[   57.997643] wlan: Enable TX SG mode
[   57.997653] wlan: Enable RX SG mode
[   58.000538] Request firmware: nxp/sdiouart8987_combo_v0.bin
[   58.000584] wlan_interrupt: sdio_ireg = 0x0
[   58.281642] Wlan: FW download over, firmwarelen=617588 downloaded 617588
[   59.147285] WLAN FW is active
[   59.147333] on_time is 57886880791
[   59.213321] FW country code WW does not match with US
[   59.213649] fw_cap_info=0x181d7f03, dev_cap_mask=0xffffffff
[   59.213697] max_p2p_conn = 8, max_sta_conn = 8
[   59.226703] Register NXP 802.11 Adapter wlan0
[   59.227892] Register NXP 802.11 Adapter uap0
[   59.230135] Register NXP 802.11 Adapter wfd0
[   59.230185] wlan: version = SD8987----16.92.21.p99.2-MM6X16423.p6-GPL-(FP92)
[   59.231697] wlan: Register to Bus Driver Done
[   59.231728] wlan: Driver loaded successfully
</pre></div>
</div>
<p>2、使用wpa_supplicant配置WiFi SSID和密码，udhcpc自动分配IP：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf &amp;
[1] 1258
root@rk3576-buildroot:/# Successfully initialized wpa_supplicant
[  726.047748] wlan: wlan0 START SCAN
[  730.345408] wlan: SCAN COMPLETED: scanned AP count=4
wlan0: SME: Trying to authenticate with 9e:2b:a6:85:b4:cd (SSID=&#39;forlinx-wlan&#39; freq=5765 MHz)
[  730.351236] wlan: HostMlme wlan0 send auth to bssid 9e:XX:XX:XX:b4:cd
wlan0: CTRL-EVENT-REGDOM-CHANGE init=BEACON_HINT type=UNKNOWN
wlan0: CTRL-EVENT-REGDOM-CHANGE init=BEACON_HINT type=UNKNOWN
BSSID 9e:2b:a6:85:b4:cd ignore list count incremented to 2, ignoring for 10 seconds
[  732.855960] wlan: wlan0 START SCAN
[  732.972103] wlan: SCAN COMPLETED: scanned AP count=4
wlan0: SME: Trying to authenticate with 9e:2b:a6:82:15:1d (SSID=&#39;forlinx-wlan&#39; freq=5220 MHz)
[  732.977432] wlan: HostMlme wlan0 send auth to bssid 9e:XX:XX:XX:15:1d
[  735.882467] wlan: wlan0 START SCAN
[  740.870925] wlan: SCAN COMPLETED: scanned AP count=7
wlan0: SME: Trying to authenticate with 9e:2b:a6:82:2d:b9 (SSID=&#39;forlinx-wlan&#39; freq=5200 MHz)
[  740.877130] wlan: HostMlme wlan0 send auth to bssid 9e:XX:XX:XX:2d:b9
wlan0: CTRL-EVENT-REGDOM-CHANGE init=BEACON_HINT type=UNKNOWN
[  741.290714] wlan0:
[  741.290731] wlan: HostMlme Auth received from 9e:XX:XX:XX:2d:b9
wlan0: Trying to associate with 9e:2b:a6:82:2d:b9 (SSID=&#39;forlinx-wlan&#39; freq=5200 MHz)
[  741.295759] CMD_RESP: cmd 0x121 error, result=0x2
[  741.295828] IOCTL failed: 00000000d51bac09 id=0x200000, sub_id=0x200024 action=2, status_code=0x3
[  741.295913] Get multi-channel policy failed
[  741.306833] wlan: HostMlme wlan0 Connected to bssid 9e:XX:XX:XX:2d:b9 successfully
wlan0: Associated with 9e:2b:a6:82:2d:b9
wlan0: CTRL-EVENT-SUBNET-STATUS-UPDATE status=0
[  741.415016] wlan0:
[  741.415041] wlan: Send EAPOL pkt to 9e:XX:XX:XX:2d:b9
[  741.418061] wlan0:
[  741.418074] wlan: Send EAPOL pkt to 9e:XX:XX:XX:2d:b9
wlan0: WPA: Key negotiation completed with 9e:2b:a6:82:2d:b9 [PTK=CCMP GTK=CCMP]
[  741.421651] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
wlan0: CTRL-EVENT-CONNECTED - Connection to 9e:2b:a6:82:2d:b9 completed [id=0 id_str=]
[  741.422676] woal_cfg80211_set_rekey_data return: gtk_rekey_offload is DISABLE

root@ok3576-buildroot:/# udhcpc -i wlan0
udhcpc: started, v1.36.0
udhcpc: broadcasting discover
udhcpc: broadcasting select for 192.168.81.79, server 192.168.80.1
udhcpc: lease of 192.168.81.79 obtained from 192.168.80.1, lease time 28800
deleting routers
adding dns 222.222.202.202
adding dns 222.222.222.222
</pre></div>
</div>
<ol class="arabic simple">
<li><p>ping外网测试网络连通性：</p></li>
</ol>
<p>root&#64;ok3576-buildroot:/#<font style="color:#0000ff;"> ping </font><a class="reference external" href="http://www.forlinx.com"><font style="color:#0000ff;">www.forlinx.com</font></a><font style="color:#0000ff;"> -c 3</font></p>
<p>PING s-526319.gotocdn.com (211.149.226.120) 56(84) bytes of data.</p>
<p>64 bytes from 211.149.226.120 (211.149.226.120): icmp_seq=1 ttl=54 time=142 ms</p>
<p>64 bytes from 211.149.226.120 (211.149.226.120): icmp_seq=2 ttl=54 time=33.6 ms</p>
<p>64 bytes from 211.149.226.120 (211.149.226.120): icmp_seq=3 ttl=54 time=88.9 ms</p>
<p>— s-526319.gotocdn.com ping statistics —</p>
<p>3 packets transmitted, 3 received, 0% packet loss, time 2002ms</p>
<p>rtt min/avg/max/mdev = 33.612/88.201/142.135/44.306 ms</p>
</section>
<section id="id36">
<h3>3.2.17  蓝牙测试<a class="headerlink" href="#id36" title="Link to this heading"></a></h3>
<p>OK3576开发板中底板AW-CM358模块，集成了蓝牙功能，本节演示使用手机与开发板之间通过蓝牙进行数据传输，支持蓝牙5.0。 注意在测试蓝牙之前需要线按照前一节“WiFi测试”将WiFi模块和固件加载完成</p>
<p>1、启动蓝牙</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# hciattach /dev/ttyS4 any 115200 flow
[ 4158.312431] of_dma_request_slave_channel: dma-names property of node &#39;/serial@2ad70000&#39; missing or empty
[ 4158.312482] dw-apb-uart 2ad70000.serial: failed to request DMA, use interrupt mode
Device setup complete
root@ok3576-buildroot:/# [ 4158.465349] Bluetooth: MGMT ver 1.22
N: [pulseaudio] bluez5-util.c: Could not find org.bluez.BatteryProviderManager1.RegisterBatteryProvider(), is bluetoothd started with experimental features enabled (-E flag)?

root@ok3576-buildroot:/# hciconfig hci0 up
</pre></div>
</div>
<p>2、蓝牙配置</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# bluetoothctl                                       //打开bluez蓝牙工具
[NEW] Controller B8:4D:43:12:43:6F forlinx [default]
Agent registered
[bluetooth]# power on                                    //启动蓝牙设备
Changing power on succeeded
[bluetooth]# pairable on                                  //设置为配对模式
Changing pairable on succeeded
[bluetooth]# discoverable on                              //设置为可发现模式
[bluetooth]# [ 1547.589820] Bluetooth: hu ffffffc066059c00 retransmitting 1 pkts
Changing discoverable on succeeded
[CHG] Controller B8:4D:43:12:43:6F Discoverable: yes
[bluetooth]# agent on                                    //启动代理
Agent is already registered
[bluetooth]# default-agent                                //设置当前代理为默认
Default agent request successful
[bluetooth]# scan on                                      //打开扫描，扫描要连接的设备
[CHG] Device 6C:2A:10:D8:4F:18 RSSI: 0xffffffb1 (-79)
[DEL] Device 25:B1:38:2B:50:3D 25-B1-38-2B-50-3D
[NEW] Device 25:B1:38:2B:50:3D 25-B1-38-2B-50-3D
[CHG] Device 6C:2A:10:D8:4F:18 RSSI: 0xffffffba (-70)
[CHG] Device 6C:2A:10:D8:4F:18 RSSI: 0xffffffae (-82)
[NEW] Device 3C:13:5A:A1:C8:B5 Redmi K60
[bluetooth]# pair 3C:13:5A:A1:C8:B5                         //配对要连接的设备mac
Attempting to pair with 3C:13:5A:A1:C8:B5
[CHG] Device 3C:13:5A:A1:C8:B5 Connected: yes
Request confirmation
[agent] Confirm passkey 628193 (yes/no): yes
[CHG] Device 3C:13:5A:A1:C8:B5 Bonded: yes
[CHG] Device 3C:13:5A:A1:C8:B5 Modalias: bluetooth:v038Fp1200d1436
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 00001105-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 0000110a-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 0000110c-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 00001112-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 00001115-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 00001116-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 0000111f-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 0000112f-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 00001132-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 00001200-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 00001800-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 00001801-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 0000fcc0-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 0000fcc0-36a2-11ea-8467-484d7e99a198
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 0000fdaa-0000-1000-8000-00805f9b34fb
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: 98b97136-36a2-11ea-8467-484d7e99a198
[CHG] Device 3C:13:5A:A1:C8:B5 UUIDs: ada499be-27d6-11ec-9427-0a80ff2603de
[CHG] Device 3C:13:5A:A1:C8:B5 ServicesResolved: yes
[CHG] Device 3C:13:5A:A1:C8:B5 Paired: yes             //输入yes
Pairing successful
[bluetooth]# scan off                                    //关闭扫描
Discovery stopped
[CHG] Device 35:A5:1D:93:B8:E9 RSSI is nil
[DEL] Device 35:A5:1D:93:B8:E9 35-A5-1D-93-B8-E9
[CHG] Device 35:06:37:F3:97:9D RSSI is nil
[DEL] Device 35:06:37:F3:97:9D 35-06-37-F3-97-9D
[CHG] Controller 20:0B:74:35:2F:5A Discovering: no
[bluetooth]# connect 3C:13:5A:A1:C8:B5                    //连接要连接的设备的mac
Attempting to connect to 3C:13:5A:A1:C8:B5
[CHG] Device 3C:13:5A:A1:C8:B5 Connected: yes
[NEW] Endpoint /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/sep1
[NEW] Transport /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/sep1/fd0
Connection successful
[DEL] Device 63:35:1D:74:AA:A1 63-35-1D-74-AA-A1
[Redmi K60]# [ 4619.269366] input: Redmi K60 (AVRCP) as /devices/virtual/input/input11
[NEW] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 [default]
[Redmi K60]# [01:16:58.016] event11 - Redmi K60 (AVRCP): is tagged by udev as: Keyboard
[01:16:58.016] event11 - Redmi K60 (AVRCP): device is a keyboard
[01:16:58.017] libinput: configuring device &quot;Redmi K60 (AVRCP)&quot;.
[01:16:58.017] associating input device event11 with output DSI-1 (none by udev)
[CHG] Device 3C:13:5A:A1:C8:B5 ServicesResolved: yes
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Repeat: off
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Shuffle: off
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Type: Audio
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Subtype: Audio Book
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Status: stopped
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Name: Music Player
[CHG] Transport /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/sep1/fd0 Volume: 0x0055 (85)
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Status: paused
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Key: Title
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Value: unknow
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Key: TrackNumber
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Value: 0x00000000 (0)
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Key: NumberOfTracks
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Value: 0x00000000 (0)
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Key: Duration
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Value: 0x00000000 (0)
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Key: Album
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Value: unknow
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Key: Artist
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Value: unknow
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Key: Genre
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Track Value:
[CHG] Player /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/player0 Position: 0x00000000 (0)
[DEL] Device 44:03:8E:A3:79:07 44-03-8E-A3-79-07
[CHG] Transport /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/sep1/fd0 Volume: 0x007f (127)
[Redmi K60]# W: [pulseaudio] module-loopback.c: Configured latency of 200.00 ms is smaller than minimum latency, using minimum instead
W: [pulseaudio] module-loopback.c: Cannot set requested sink latency of 35.20 ms, adjusting to 39.91 ms
W: [pulseaudio] module-loopback.c: Cannot set requested source latency of 66.67 ms, adjusting to 250.00 ms
[CHG] Transport /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/sep1/fd0 Volume: 0x0055 (85)
[DEL] Device D1:B1:46:9D:F9:C6 Mi Smart Band 4
[DEL] Device 64:F7:FF:12:32:2A 64-F7-FF-12-32-2A
[DEL] Device 7E:84:48:D0:B8:CA 7E-84-48-D0-B8-CA
[DEL] Device 6D:8B:09:A7:89:8F 6D-8B-09-A7-89-8F
[DEL] Device 46:CB:AA:35:D6:01 46-CB-AA-35-D6-01
[DEL] Device 5E:FB:3A:DF:A7:BC 5E-FB-3A-DF-A7-BC
[DEL] Device 66:56:59:68:0F:06 66-56-59-68-0F-06
[DEL] Device BE:F4:D4:08:7E:D6 BE-F4-D4-08-7E-D6
[DEL] Device 47:70:48:8E:72:9E 47-70-48-8E-72-9E
[DEL] Device 76:1F:77:CF:A9:E9 76-1F-77-CF-A9-E9
[DEL] Device 76:36:16:6E:CF:B6 76-36-16-6E-CF-B6
[DEL] Device 6C:2A:10:D8:4F:18 6C-2A-10-D8-4F-18
[CHG] Transport /org/bluez/hci0/dev_3C_13_5A_A1_C8_B5/sep1/fd0 Volume: 0x007f (127)
Authorize service
[agent] Authorize service 00001108-0000-1000-8000-00805f9b34fb (yes/no): [DEL] Device D4:BB:E6:8E:BB:B0 mywifi
[agent] Authorize service 00001108-0000-1000-8000-00805f9b34fb (yes/no): [DEL] Device 4C:50:77:0F:3B:2C huawei111
[agent] Authorize service 00001108-0000-1000-8000-00805f9b34fb (yes/no): [DEL] Device 24:DA:33:C9:10:86 CON
[agent] Authorize service 00001108-0000-1000-8000-00805f9b34fb (yes/no): yes  //输入yes
</pre></div>
</div>
<p>开发板蓝牙连接到手机端显示为蓝牙耳机。</p>
</section>
<section id="id37">
<h3>3.2.18  4G/5G<a class="headerlink" href="#id37" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>说明：</strong></p></li>
<li><p><strong>使用物联网卡测试时，需确认模组固件版本，低版本固件不支持，需升级</strong>EC05<strong>固件</strong></p></li>
<li><p><strong>有些物联网卡拨号时需要设置专用账号和密码，用户需根据实际情况调整指令</strong></p></li>
<li><p><strong>可使用quectelCM –help指令查看相关参数含义</strong></p></li>
<li><p><strong>4G/5G 需要使用底板S2开关做切换</strong></p></li>
</ul>
<p>OK3576支持4G模块EM05和5G RM500U，开发板启动前接入4G/5G模块 ，并插入SIM卡，启动开发板。</p>
<p>1、连接好模块，开发板和模块上电后，可通过lsusb指令查看USB状态</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# lsusb
Bus 002 Device 002: ID 04b4:6500
Bus 001 Device 001: ID 1d6b:0002
Bus 001 Device 004: ID 0000:3825
Bus 001 Device 003: ID 09da:2268
Bus 001 Device 002: ID 04b4:6502
Bus 002 Device 003: ID 0781:5591
Bus 002 Device 001: ID 1d6b:0003
Bus 001 Device 005: ID 2c7c:0125                            //EC05的VID和PID
</pre></div>
</div>
<p>/dev下查看设备节点状态</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# ls /dev/ttyUSB*
/dev/ttyUSB0  /dev/ttyUSB1  /dev/ttyUSB2  /dev/ttyUSB3
</pre></div>
</div>
<p>2、设备识别成功后，可进行拨号上网测试。fltest_quectel.sh会调用quectelCM，具体指令可查看/usr/bin/fltest_quectel.sh</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# quectelCM &amp;
</pre></div>
</div>
<p>打印信息如下：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>[04-23_05:32:27:029]Quectel_QConnectManager_Linux_V1.6.0.24
[04-23_05:32:27:030] Find /sys/bus/usb/devices/1-1.4 idVendor=0x2c7c idProduct=0x125, bus=0x001, dev=0x005
[04-23_05:32:27:030] Auto find qmichannel = /dev/cdc-wdm0
[04-23_05:32:27:030] Auto find usbnet_adapter = wwan0
[04-23_05:32:27:030] netcard driver = qmi_wwan, driver version = 6.1.57
[04-23_05:32:27:031] Modem works in QMI mode
[04-23_05:32:27:034] cdc_wdm_fd = 7
[04-23_05:32:27:115] Get clientWDS = 7
[04-23_05:32:27:147] Get clientDMS = 1
[04-23_05:32:27:179] Get clientNAS = 2
[04-23_05:32:27:210] Get clientUIM = 1
[04-23_05:32:27:243] Get clientWDA = 1
[04-23_05:32:27:275] requestBaseBandVersion EM05CEFCR06A04M1G_ND
[04-23_05:32:27:403] requestGetSIMStatus SIMStatus: SIM_READY
[04-23_05:32:27:435] requestGetProfile[1] cmnet///0/IPV4V6
[04-23_05:32:27:467] requestRegistrationState2 MCC: 460, MNC: 0, PS: Attached, DataCap: LTE
[04-23_05:32:27:499] requestQueryDataCall IPv4ConnectionStatus: DISCONNECTED
[04-23_05:32:27:499] ifconfig wwan0 0.0.0.0
[04-23_05:32:27:507] ifconfig wwan0 down
[04-23_05:32:27:563] requestSetupDataCall WdsConnectionIPv4Handle: 0x86da5b80
[04-23_05:32:27:691] ifconfig wwan0 up
[04-23_05:32:27:697] busybox udhcpc -f -n -q -t 5 -i wwan0
udhcpc: started, v1.36.0
udhcpc: broadcasting discover
udhcpc: broadcasting select for 10.19.76.92, server 10.19.76.93
udhcpc: lease of 10.19.76.92 obtained from 10.19.76.93, lease time 7200
[04-23_05:32:27:747] deleting routers
[04-23_05:32:27:768] adding dns 111.11.1.3
[04-23_05:32:27:768] adding dns 111.11.11.3 
</pre></div>
</div>
<p>3、ping 域名测试。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@rk3576-buildroot:/# ping -I wwan0 www.forlinx.com -c 3    //指定wwan0网卡ping3次
PING s-526319.gotocdn.com (211.149.226.120) from 10.19.76.92 wwan0: 56(84) bytes of data.
64 bytes from 211.149.226.120 (211.149.226.120): icmp_seq=1 ttl=48 time=79.2 ms
64 bytes from 211.149.226.120 (211.149.226.120): icmp_seq=2 ttl=48 time=64.1 ms
64 bytes from 211.149.226.120 (211.149.226.120): icmp_seq=3 ttl=48 time=62.6 ms

--- s-526319.gotocdn.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 62.606/68.624/79.164/7.477 ms
</pre></div>
</div>
</section>
<section id="id38">
<h3>3.2.19  放/录音测试<a class="headerlink" href="#id38" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">OK3576提供NAU88C22YG芯片1路标准3.5mm音频插座1个XH2.0-2P 白色插座 P25 引出和1个PH2.0-4P白色插座P48引出,可驱动8Ω 喇叭，最高输出功率为 1W，在进行放音测试前，请将准备好的耳机插入听筒接口，或将扬声器插入底板上的对应插槽上进行测试。</font></p>
<section id="id39">
<h4>3.2.19.1  查看声卡<a class="headerlink" href="#id39" title="Link to this heading"></a></h4>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# aplay -l   //查看声卡
**** List of PLAYBACK Hardware Devices ****
card 0: rockchipnau8822 [rockchip-nau8822], device 0: dailink-multicodecs nau8822-hifi-0 [dailink-multicodecs nau8822-hifi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 1: rockchiphdmi [rockchip-hdmi], device 0: rockchip-hdmi i2s-hifi-0 [rockchip-hdmi i2s-hifi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
</pre></div>
</div>
</section>
<section id="hdmi">
<h4>3.2.19.2  HDMI 播放声音<a class="headerlink" href="#hdmi" title="Link to this heading"></a></h4>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# gst-play-1.0 /userdata/piano2-CoolEdit.mp3 --audiosink=&quot;alsasink device=plughw:2,0&quot;
</pre></div>
</div>
</section>
<section id="speaker-headphone">
<h4>3.2.19.3  Speaker Headphone 播放声音<a class="headerlink" href="#speaker-headphone" title="Link to this heading"></a></h4>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# amixer -c 0                           //查询音频参数
root@ok3576-buildroot:/# amixer -c 0 sset Headphone 63,63      //设置headphone音量
root@ok3576-buildroot:/# amixer -c 0 sset Speaker 63,63         //设置Speaker音量
root@ok3576-buildroot:/# gst-play-1.0 /userdata/piano2-CoolEdit.mp3 --audiosink=&quot;alsasink device=plughw:0,0&quot;
</pre></div>
</div>
<p><font style="color:#000000;">不插耳机，声音从Speaker接口播放，接上喇叭即可听到声音。将耳机插到Headphone接口，声音从耳机播放。</font></p>
</section>
<section id="mic">
<h4>3.2.19.4  MIC输入<a class="headerlink" href="#mic" title="Link to this heading"></a></h4>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# arecord -l 
**** List of CAPTURE Hardware Devices ****
card 0: rockchipnau8822 [rockchip-nau8822], device 0: dailink-multicodecs nau8822-hifi-0 [dailink-multicodecs nau8822-hifi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
card 1: rockchiphdmi [rockchip-hdmi], device 0: rockchip-hdmi i2s-hifi-0 [rockchip-hdmi i2s-hifi-0]
  Subdevices: 1/1
  Subdevice #0: subdevice #0
root@ok3576-buildroot:/# arecord -D hw:0,0 -d 5 -f cd -t wav test1.wav           //采集声音5秒，并保存为wav格式
root@ok3576-buildroot:/# aplay -D plughw:0,0 test1.wav   //使用 Speaker Headphone 播放采集声音
</pre></div>
</div>
</section>
</section>
<section id="lcd">
<h3>3.2.20  LCD 背光调节<a class="headerlink" href="#lcd" title="Link to this heading"></a></h3>
<p>背光的亮度设置范围为（0–255），255表示亮度最高，0表示关闭背光亮度。在mipi dsi0上接上mipi屏幕后，上电启动。进入系统后在终端输入如下命令进行背光测试。</p>
<p>1、查看支持背光型号</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# ls /sys/class/backlight
backlight 显示当前支持屏背光型号
</pre></div>
</div>
<p>下面以dsi0为例：</p>
<p>1、查看当前屏幕背光值：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cat /sys/class/backlight/backlight/brightness
200                                           //当前背光值为200
</pre></div>
</div>
<p>2、背光熄灭：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# echo 0 &gt; /sys/class/backlight/backlight/brightness             
</pre></div>
</div>
<p>3、LCD背光亮起：</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# echo 125 &gt; /sys/class/backlight/backlight/brightness
</pre></div>
</div>
</section>
<section id="can">
<h3>3.2.21  CAN测试<a class="headerlink" href="#can" title="Link to this heading"></a></h3>
<p>OK3576-C平台有两路CAN总线接口，CAN 连线方式： CAN 的 H 端子与其它 CAN 设备 H 端连接；CAN的 L 端子与其它 CAN 设备 L 端子连接。</p>
<p>短接CAN0和CAN1，如图：</p>
<p><img alt="Image" src="_images/083fb982828e4f0898bb8f9e5a3b1438.png" /></p>
<p>在开发板终端执行如下命令：</p>
<p><font style="color:#000000;">1、查看CAN网络设备</font></p>
<p>root&#64;rk3576-buildroot:/#<font style="color:#0000ff;">ifconfig -a</font></p>
<p>can0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>      NOARP  MTU:16  Metric:1

      RX packets:0 errors:0 dropped:0 overruns:0 frame:0

      TX packets:0 errors:0 dropped:0 overruns:0 carrier:0

      collisions:0 txqueuelen:10

      RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

      Interrupt:62
</pre></div>
</div>
<p>can1      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>      NOARP  MTU:16  Metric:1

      RX packets:0 errors:0 dropped:0 overruns:0 frame:0

      TX packets:0 errors:0 dropped:0 overruns:0 carrier:0

      collisions:0 txqueuelen:10

      RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

      Interrupt:63
</pre></div>
</div>
<p>eth0      Link encap:Ethernet  HWaddr 36:6B:4A:1E:01:49</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>      inet addr:172.20.0.117  Bcast:0.0.0.0  Mask:255.255.255.0

      UP BROADCAST MULTICAST  MTU:1500  Metric:1

      RX packets:0 errors:0 dropped:0 overruns:0 frame:0

      TX packets:0 errors:0 dropped:0 overruns:0 carrier:0

      collisions:0 txqueuelen:1000

      RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

      Interrupt:64
</pre></div>
</div>
<p>eth1      Link encap:Ethernet  HWaddr 3A:6B:4A:1E:01:49</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>      UP BROADCAST MULTICAST  MTU:1500  Metric:1

      RX packets:0 errors:0 dropped:0 overruns:0 frame:0

      TX packets:0 errors:0 dropped:0 overruns:0 carrier:0

      collisions:0 txqueuelen:1000

      RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

      Interrupt:66
</pre></div>
</div>
<p>lo        Link encap:Local Loopback</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>      inet addr:127.0.0.1  Mask:255.0.0.0

      inet6 addr: ::1/128 Scope:Host

      UP LOOPBACK RUNNING  MTU:65536  Metric:1

      RX packets:64 errors:0 dropped:0 overruns:0 frame:0

      TX packets:64 errors:0 dropped:0 overruns:0 carrier:0

      collisions:0 txqueuelen:1000

      RX bytes:3824 (3.7 KiB)  TX bytes:3824 (3.7 KiB)
</pre></div>
</div>
<p>2、设置CAN0、CAN1参数</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# ip link set can0 down
root@ok3576-buildroot:/# ip link set can0 type can bitrate 1000000 sample-point 0.8 dbitrate 2000000 sample-point 0.8 fd on
root@ok3576-buildroot:/# ip link set can1 down
root@ok3576-buildroot:/# ip link set can1 type can bitrate 1000000 sample-point 0.8 dbitrate 2000000 sample-point 0.8 fd on
</pre></div>
</div>
<p>设置can0和can1设备波特率为500000</p>
<p>3、打开can 设备</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# ip link set can0 up
root@ok3576-buildroot:/# echo 4096 &gt; /sys/class/net/can0/tx_queue_len
root@ok3576-buildroot:/# ip link set can1 up
root@ok3576-buildroot:/# echo 4096 &gt; /sys/class/net/can1/tx_queue_len
</pre></div>
</div>
<p>4、客户端发送数据服务端接收数据</p>
<p>can0设备当服务端（服务端先执行以下命令）</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# candump can0&amp;
</pre></div>
</div>
<p>can1设备当客户端（客户端发送数据）</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cansend can1 1F334455#1122334455667788
</pre></div>
</div>
</section>
<section id="pcie">
<h3>3.2.22  PCIE测试<a class="headerlink" href="#pcie" title="Link to this heading"></a></h3>
<p>OK3576-C板卡有1个PCIE2.0接口</p>
<p>系统上电前将PCIE模块插入底板PCIE卡槽。上电后启动后，通过lspci可以看到对应设备枚举成功。</p>
<p><img alt="Image" src="_images/9822bb859d614acb83929d56dbe2f1da.png" /></p>
<p>由于pcie设备类型较多，有可能默认不被内核支持需自行添加编译设备对应的驱动程序。</p>
<p>以pcie硬盘为例，ls /dev 可以看到如下nvme节点：</p>
<p><img alt="Image" src="_images/c1891b418f1d4106a550cfbfdea82f9c.png" /></p>
<p><font style="color:#000000;">使用dd测试硬盘速率</font></p>
<p>写入：</p>
<p><img alt="Image" src="_images/7362eb724803468881df628d2e36bd15.png" /></p>
<p>读取</p>
<p><img alt="Image" src="_images/2e1ba45a1e184388a5581a0de2c05aa7.png" /></p>
</section>
<section id="rknpu">
<h3>3.2.23  RKNPU测试<a class="headerlink" href="#rknpu" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">linux文件系统里提供了NPU的演示例程，可以运行测试：</font></p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# ./rockchip-test/rockchip_test.sh
******************************************************
***                                                ***
***          *****************************         ***
***          *    ROCKCHIPS TEST TOOLS   *         ***
***          *  V2.4 updated on 20240403 *         ***
***          *****************************         ***
***                                                ***
*****************************************************
*****************************************************
ddr test:              1 (ddr stress test)
cpu test:              2 (cpu stress test)
gpu test:              3 (gpu stress test)
npu test:              4 (npu stress test)
suspend_resume test:   5 (suspend resume)
reboot test:           6 (auto reboot test)
power lost test:       7 (power lost test)
flash stress test:     8 (flash stress test)
recovery test:         9 (recovery wipe all test)
audio test:           10 (audio test)
camera test:          11 (camera test)
video test:           12 (video test)
bluetooth test:       13 (bluetooth test)
wifi test:            14 (wifi test)
wifibt config test:   15 (wifibt config test)
chromium test:        16 (chromium with video test)
*****************************************************
please input test moudle:4                   //输入4选择npu stress test
*****************************************************
***                                               ***
***            NPU TEST                           ***
***                                               ***
*****************************************************
***********************************************************
npu stress test:                                        1
npu scale frequency test:                       2
rknn demo test:                                 3
***********************************************************
3                                         //输入3选择rknn demo test
RKSockServer     00:37:39-138 {initServer        :058} proto:tcp, hostname:127.0.0.1, path:, port:3893
RKSockServer     00:37:39-138 {initNetServer     :071} binding to host:127.0.0.1, port:3893
(null)           00:37:39-139 {rt_os_sys_set_max_:050} max open files cur: 65536 rlim_max: 65536 change to 65535
rk-debug -----------------------Graphics so version=4.25.23.2-----------------------------
rk-debug init version=4.25.23.2,args[16,16,0], threadId=1103
arm_release_ver of this libmali is &#39;g2p0-01eac0&#39;, rk_so_ver is &#39;6&#39;.
GL Version = OpenGL ES 3.2 v1.g2p0-01eac0.ec91dd91b6def45faaba124fc8d656d3
GL Vendor = ARM
GL Renderer = Mali-G52
rk-debug setupGraphicsRenderInRGB1555YUVTarget [6,1,0,0]
rk-debug setupGraphicsRenderInRGB888YUVTarget [9,1,0,-1]
rk-debug -----------------------Graphics so version=4.25.23.2-----------------------------
rk-debug init version=4.25.23.2,args[16,16,0], threadId=1117
GL Version = OpenGL ES 3.2 v1.g2p0-01eac0.ec91dd91b6def45faaba124fc8d656d3
GL Vendor = ARM
GL Renderer = Mali-G52
rk-debug setupGraphicsRenderInRGB1555YUVTarget [6,1,0,0]
rk-debug setupGraphicsRenderInRGB888YUVTarget [9,1,0,-1]
cmpi             00:37:39-541 {parserDisplayCfg  :095}   pstDisPlayCfg-&gt;bUseRGACompres = 1
cmpi             00:37:39-541 {parserDisplayCfg  :096}   pstDisPlayCfg-&gt;enCompressMode = 0
cmpi             00:37:39-541 {parserDisplayCfg  :095}   pstDisPlayCfg-&gt;bUseRGACompres = 1
…
</pre></div>
</div>
</section>
<section id="sqlite3">
<h3>3.2.24  SQLite3测试<a class="headerlink" href="#sqlite3" title="Link to this heading"></a></h3>
<p>SQLite3是一款轻型的数据库，是遵守ACID的关系型数据库管理系统，占用资源低。OK3576-C开发板移植的是3.21.0版本的sqlit3。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@rk3576-buildroot:/# sqlite3
SQLite version 3.36.0 2021-06-18 18:36:39
Enter &quot;.help&quot; for usage hints.
Connected to a transient in-memory database.
Use &quot;.open FILENAME&quot; to reopen on a persistent database.
sqlite&gt; create table tbl1 (one varchar(10), two smallint);//创建表tbl1
sqlite&gt; insert into tbl1 values(&#39;hello!&#39;,10);//tbl1表内插入数据
hello!|10
sqlite&gt; insert into tbl1 values(&#39;goodbye&#39;, 20);//tbl1表内插入数据goodbye|20
sqlite&gt; select * from tbl1;//查询表tbl1中内容
hello!|10
goodbye|20
sqlite&gt; delete from tbl1 where one = &#39;hello!&#39;;//删除数据
sqlite&gt; select * from tbl1;//查询表tbl1中内容
goodbye|20
sqlite&gt; .quit			                                //退出数据库（或使用.exit命令）
root@rk3576-buildroot:/#
</pre></div>
</div>
</section>
<section id="gpio">
<h3>3.2.25  GPIO测试<a class="headerlink" href="#gpio" title="Link to this heading"></a></h3>
<p>OK3576平台底板原理图中引出扩展IO引脚，位于底板P17</p>
<p><img alt="Image" src="_images/4de50a3ca5f84478bf1fe47929ad1cc0.png" /></p>
<p>以GPIO_P17 PIN为例进行测试</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# cat /sys/kernel/debug/gpio  | grep i2c
gpiochip6: GPIOs 485-508, parent: i2c/2-0023, 2-0023, can sleep:	//识别到io扩展芯片

root@ok3576-buildroot:/# fltest_extgpio.sh GPIO_P17 1	//GPIO_P17 拉高 
root@ok3576-buildroot:/# fltest_extgpio.sh GPIO_P17 0	//GPIO_P17 拉低
</pre></div>
</div>
<p><strong>注意</strong>：fltest_extgpio.sh只能测试IO扩展芯片引脚， OK3576 soc GPIO引脚请使用fltest_gpio.sh脚本进行测试。</p>
</section>
</section>
</section>
<section id="id40">
<h1>04_OK3576平台多媒体测试<a class="headerlink" href="#id40" title="Link to this heading"></a></h1>
<p>OK3576平台音视频部分应用层软件采用的是Gstreamer，支持硬件编解码。本节所有的示例均是基于Gstreamer命令行的形式。如果您需要带界面的播放器，您也可以使用qt的多媒体类，同样支持硬编解，可以参考Qt测试章节。</p>
<p>OK3576平台内部有一个视频处理单元VPU，支持以下格式的视频硬编解：</p>
<p>视频解码： H.264, H.265, VP9,AV1,AVS2。</p>
<p>视频编码： H264、H.265。</p>
<p>OK3576平台硬件编解码参数表：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Video Decoder</p></th>
<th class="head"><p>Format</p></th>
<th class="head"><p>Profile</p></th>
<th class="head"><p>Resolution &amp; Frame rate</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p></p></td>
<td><p>H.265</p></td>
<td><p>main 10</p></td>
<td><p>8K&#64;30fps or 4K&#64;120fps</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>H.264</p></td>
<td><p>main 10</p></td>
<td><p>4K&#64;60fps</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>VP9</p></td>
<td><p>Profile 0/2</p></td>
<td><p>8K&#64;30fps or 4K&#64;120fps</p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p>AV1</p></td>
<td><p>Profile 0/2</p></td>
<td><p>8K&#64;30fps or 4K&#64;120fps</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>AVS2</p></td>
<td><p>main 10</p></td>
<td><p>8K&#64;30fps or 4K&#64;120fps</p></td>
</tr>
<tr class="row-odd"><td><p>Video Encoder</p></td>
<td><p>H.264</p></td>
<td><p>multi-stream</p></td>
<td><p>4K&#64;60fps</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>H.265</p></td>
<td><p>multi-stream</p></td>
<td><p>4K&#64;60fps</p></td>
</tr>
</tbody>
</table>
<section id="id41">
<h2>4.1 音频和视频播放体验<a class="headerlink" href="#id41" title="Link to this heading"></a></h2>
<section id="gst-play">
<h3>4.1.1使用gst-play播放器播放视频和音频<a class="headerlink" href="#gst-play" title="Link to this heading"></a></h3>
<p>Gplay 是基于 Gstreamer 实现的音视频播放器，能够自动根据硬件自动选择合适的插件进行音视频播放，运行也十分简单。</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/#&lt;font style=&quot;color:#0000FF;&quot;&gt; gst-play-1.0 /userdata/1080p_30fps_h265-30S.mp4&lt;/font&gt;

//播放带声音视频文件，由耳机放音测试

Press &#39;k&#39; to see a list of keyboard shortcuts.

Now playing /userdata/1080p_30fps_h265-30S.mp4

Redistribute latency...

======&gt; lhj add func:mpp_dec_init line:608 ok mpp_dec_debug:0

[  112.236844] dwhdmi-rockchip 27da0000.hdmi: Rate 149430000 missing; compute N dynamically

Redistribute latency...

[  112.282339] dwhdmi-rockchip 27da0000.hdmi: Rate 149430000 missing; compute N dynamically

Redistribute latency...

Redistribute latency...

Redistribute latency...

0:00:30.0 / 0:00:30.0

Reached end of play list.
</pre></div>
</div>
</section>
<section id="gst-launch">
<h3>4.1.2使用gst-launch 播放视频<a class="headerlink" href="#gst-launch" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/#&lt;font style=&quot;color:#0000FF;&quot;&gt; gst-launch-1.0 filesrc location=/userdata/1080p_60fps_h265-30S.mp4 ! qtdemux ! queue ! h265parse ! mppvideodec ! waylandsink&lt;/font&gt;

//仅播放视频

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Redistribute latency...

======&gt; lhj add func:mpp_dec_init line:608 ok mpp_dec_debug:0

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstSystemClock

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:30.000513681

Setting pipeline to NULL ...

Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id42">
<h3>4.1.3使用gst-launch 播放音频<a class="headerlink" href="#id42" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/#&lt;font style=&quot;color:#0000FF;&quot;&gt; gst-launch-1.0 filesrc location=/userdata/piano2-CoolEdit.mp3 ! id3demux ! mpegaudioparse ! mpg123audiodec ! alsasink device=plughw:1,0&lt;/font&gt;

//仅播放音频

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstAudioSinkClock

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:06.360500639

Setting pipeline to NULL ...

Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id43">
<h3>4.1.4使用gst-launch 播放视频和音频<a class="headerlink" href="#id43" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/#&lt;font style=&quot;color:#0000FF;&quot;&gt; gst-launch-1.0 filesrc location=/userdata/1080p_60fps_h265-30S.mp4 ! qtdemux name=dec dec. ! queue ! h265parse ! mppvideodec ! waylandsink dec. ! queue ! decodebin ! alsasink device=plughw:1,0&lt;/font&gt;

//播放带声音视频文件

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Redistribute latency...

======&gt; lhj add func:mpp_dec_init line:608 ok mpp_dec_debug:0

Redistribute latency...

Redistribute latency...

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstAudioSinkClock

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:30.001881098

Setting pipeline to NULL ...

Freeing pipeline ...
</pre></div>
</div>
</section>
</section>
<section id="id44">
<h2>4.2 视频硬编码<a class="headerlink" href="#id44" title="Link to this heading"></a></h2>
<section id="h-264">
<h3>4.2.1视频硬编码H.264<a class="headerlink" href="#h-264" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/#&lt;font style=&quot;color:#0000FF;&quot;&gt; gst-launch-1.0 videotestsrc num-buffers=600 ! video/x-raw,framerate=30/1,width=3840,height=2160 ! mpph264enc ! h264parse ! mp4mux ! filesink location=test.mp4&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstSystemClock

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:31.765292066

Setting pipeline to NULL ...

Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="h-265">
<h3>4.2.2视频硬编码H.265<a class="headerlink" href="#h-265" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/#&lt;font style=&quot;color:#0000FF;&quot;&gt; gst-launch-1.0 videotestsrc num-buffers=600 ! video/x-raw,framerate=60/1,width=3840,height=2160 ! mpph265enc ! h265parse ! mp4mux ! filesink location=test.mp4&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstSystemClock

0:00:06.9 / 0:00:10.0 (69.5 %)


</pre></div>
</div>
</section>
</section>
<section id="id45">
<h2>4.3 视频硬解码<a class="headerlink" href="#id45" title="Link to this heading"></a></h2>
<section id="h264">
<h3>4.3.1解码并播放H264格式视频<a class="headerlink" href="#h264" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0 filesrc location=/userdata/1080p_30fps_h264-30S.mp4 ! qtdemux ! queue ! h264parse ! mppvideodec ! waylandsink&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Redistribute latency...

======&gt; lhj add func:mpp_dec_init line:608 ok mpp_dec_debug:0

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstSystemClock

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:30.000555181

Setting pipeline to NULL ...

Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id46">
<h3>4.3.2解码并播放H264格式视频带音频<a class="headerlink" href="#id46" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0 filesrc location=/userdata/1080p_30fps_h264-30S.mp4 ! qtdemux name=demux demux.video_0 ! queue ! h264parse ! mppvideodec ! waylandsink demux.audio_0 ! queue ! aacparse ! faad ! alsasink device=plughw:1,0&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Redistribute latency...

======&gt; lhj add func:mpp_dec_init line:608 ok mpp_dec_debug:0

Redistribute latency...

Redistribute latency...

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstAudioSinkClock

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:30.002234765

Setting pipeline to NULL ...

Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="h265">
<h3>4.3.3解码并播放H265格式视频<a class="headerlink" href="#h265" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0 filesrc location=/userdata/1080p_60fps_h265-30S.mp4 ! qtdemux ! h265parse ! mppvideodec ! waylandsink&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Redistribute latency...

======&gt; lhj add func:mpp_dec_init line:608 ok mpp_dec_debug:0

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstSystemClock

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:30.000445014

Setting pipeline to NULL ...

Freeing pipeline ...
</pre></div>
</div>
</section>
<section id="id47">
<h3>4.3.4解码并播放H265格式视频带音频<a class="headerlink" href="#id47" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt; gst-launch-1.0 filesrc location=/userdata/4k_60fps_h265-30S.mp4 ! qtdemux name=demux demux.video_0 ! queue ! h265parse ! mppvideodec ! waylandsink demux.audio_0 ! queue ! aacparse ! faad ! alsasink&lt;/font&gt;

Pipeline is PREROLLING ...

[ 1705.438451] dwhdmi-rockchip fde80000.hdmi: Rate 266625000 missing; computeRedistribute latency. ..

NRedistribute latency...

 dynamically

Pipeline is PREROLLED ...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstAudioSinkClock

0:00:01.4 / 0:00:30.0 (4.8 %)
</pre></div>
</div>
</section>
<section id="vp9">
<h3>4.3.5 解码并播放 VP9 格式视频<a class="headerlink" href="#vp9" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0 filesrc location=/userdata/1080p_60fps_vp9-30S.mp4  ! qtdemux ! vp9parse ! mppvideodec ! waylandsink&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstSystemClock

^Chandling interrupt. (10.3 %)

Interrupt: Stopping pipeline ...

Execution ended after 0:00:03.189342028
</pre></div>
</div>
</section>
<section id="id48">
<h3>4.3.6 解码并播放 VP9 格式视频带音频<a class="headerlink" href="#id48" title="Link to this heading"></a></h3>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/#  &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0 filesrc location=/userdata/1080p_60fps_vp9-30S.mp4 ! qtdemux name=demux demux.video_0 ! queue ! vp9parse ! mppvideodec ! waylandsink demux.audio_0 ! queue ! aacparse ! faad ! alsasink device=plughw:2,0&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is PREROLLING ...

[  341.745740] dwhdmi-rockchip 27da0000.hdmi: Rate 149430000 missing; compute N dynamically

Redistribute latency...

Redistribute latency...

Pipeline is PREROLLED ...

Prerolled, waiting for async message to finish...

Setting pipeline to PLAYING ...

Redistribute latency...

New clock: GstAudioSinkClock

^Chandling interrupt. (1.3 %)

Interrupt: Stopping pipeline ...

Execution ended after 0:00:00.451334462
</pre></div>
</div>
</section>
</section>
<section id="id49">
<h2>4.4 摄像头测试<a class="headerlink" href="#id49" title="Link to this heading"></a></h2>
<p>OK3576支持OV13855 MIPI摄像头、UVC摄像头，首先来测试一下UVC摄像头，这里以罗技C270进程测试，将USB摄像头插入开发板，将自动安装uvc驱动。</p>
<section id="uvc-camera">
<h3>4.4.1 UVC Camera测试<a class="headerlink" href="#uvc-camera" title="Link to this heading"></a></h3>
<section id="id50">
<h4><strong>4.4.1.1摄像头识别检测和格式支持查询</strong><a class="headerlink" href="#id50" title="Link to this heading"></a></h4>
<p>摄像头识别检测</p>
<p>root&#64;ok3576-buildroot:/# <font style="color:#0000ff;">v4l2-ctl –list-devices		</font>//查看UVC camera设备结点，可见/dev/video20&amp;21为USB摄像头结点</p>
<p>UVC Camera (046d:0825) (usb-xhci-hcd.0.auto-1.1):</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>    /dev/video20

    /dev/video21

    /dev/media2
</pre></div>
</div>
<p>格式支持查询</p>
<p>root&#64;ok3576-buildroot:/# <font style="color:#0000ff;">v4l2-ctl –list-formats-ext -d /dev/video20 	</font>//查看摄像头支持的格式</p>
<p>ioctl: VIDIOC_ENUM_FMT</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>    Type: Video Capture



    [0]: &#39;YUYV&#39; (YUYV 4:2:2)

            Size: Discrete 640x480

                    Interval: Discrete 0.033s (30.000 fps)

                    Interval: Discrete 0.040s (25.000 fps)

                    Interval: Discrete 0.050s (20.000 fps)

                    Interval: Discrete 0.067s (15.000 fps)

                    Interval: Discrete 0.100s (10.000 fps)

                    Interval: Discrete 0.200s (5.000 fps)

            Size: Discrete 160x120

                    Interval: Discrete 0.033s (30.000 fps)

                    Interval: Discrete 0.040s (25.000 fps)

                    Interval: Discrete 0.050s (20.000 fps)

                    Interval: Discrete 0.067s (15.000 fps)

                    Interval: Discrete 0.100s (10.000 fps)

                    Interval: Discrete 0.200s (5.000 fps)

            Size: Discrete 176x144

                    Interval: Discrete 0.033s (30.000 fps)

                    Interval: Discrete 0.040s (25.000 fps)

                    Interval: Discrete 0.050s (20.000 fps)

                    Interval: Discrete 0.067s (15.000 fps)

                    Interval: Discrete 0.100s (10.000 fps)

                    Interval: Discrete 0.200s (5.000 fps)

            Size: Discrete 320x176

                    Interval: Discrete 0.033s (30.000 fps)

                    Interval: Discrete 0.040s (25.000 fps)

                    Interval: Discrete 0.050s (20.000 fps)

                    Interval: Discrete 0.067s (15.000 fps)

                    Interval: Discrete 0.100s (10.000 fps)

                    Interval: Discrete 0.200s (5.000 fps)
</pre></div>
</div>
</section>
<section id="id51">
<h4><strong>4.4.1.2摄像头采集格式查询和修改</strong><a class="headerlink" href="#id51" title="Link to this heading"></a></h4>
<p>摄像头采集格式查询</p>
<p>root&#64;ok3576-buildroot:/# <font style="color:#0000ff;">v4l2-ctl -V -d /dev/video20</font></p>
<p>Format Video Capture:</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>    Width/Height      : 640/480

    Pixel Format      : &#39;YUYV&#39; (YUYV 4:2:2)

    Field             : None

    Bytes per Line    : 1280

    Size Image        : 614400

    Colorspace        : sRGB

    Transfer Function : Rec. 709

    YCbCr/HSV Encoding: ITU-R 601

    Quantization      : Default (maps to Limited Range)

    Flags             :
</pre></div>
</div>
</section>
<section id="id52">
<h4><strong>4.4.1.3摄像头图像预览和拍照</strong><a class="headerlink" href="#id52" title="Link to this heading"></a></h4>
<p>摄像头图像预览</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0  v4l2src device=/dev/video20 ! videoconvert ! video/x-raw,format=NV12,width=640,height=480  ! waylandsink&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is live and does not need PREROLL ...

Pipeline is PREROLLED ...

Setting pipeline to PLAYING ...

New clock: GstSystemClock

Redistribute latency...

0:00:04.8 / 99:99:99.
</pre></div>
</div>
<p>摄像头拍照</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0 v4l2src device=/dev/video20 num-buffers=1 ! videoconvert ! video/x-raw,format=NV12,width=640,height=480 ! jpegenc ! filesink location=pic.jpg&lt;/font&gt;

Setting pipeline to PAUSED ...

Pipeline is live and does not need PREROLL ...

Pipeline is PREROLLED ...

Setting pipeline to PLAYING ...

New clock: GstSystemClock

Redistribute latency...

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:00.941724595

Setting pipeline to NULL ...

Freeing pipeline ...

//执行完成后查看根目录下生成的pic.jpg文件即可
</pre></div>
</div>
</section>
</section>
<section id="ov13855">
<h3>4.4.2  OV13855测试<a class="headerlink" href="#ov13855" title="Link to this heading"></a></h3>
<section id="id53">
<h4>**4.4.2.1 摄像头识别检测和格式支持查询 **<a class="headerlink" href="#id53" title="Link to this heading"></a></h4>
<p>root&#64;ok3576-buildroot:/#   v4l2-ctl –list-devices</p>
<p>rkcif (platform:rkcif-mipi-lvds):</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>    /dev/video0

    /dev/video1

    /dev/video2

    /dev/video3

    /dev/video4

    /dev/video5

    /dev/video6

    /dev/video7

    /dev/video8

    /dev/video9

    /dev/video10

    /dev/media0
</pre></div>
</div>
<p>rkisp_mainpath (platform:rkisp-vir0): //cam1</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>    /dev/video55

    /dev/video56

    /dev/video57

    /dev/video58

    /dev/video59

    /dev/video60

    /dev/video63

    /dev/media5
</pre></div>
</div>
</section>
<section id="id54">
<h4><strong>4.4.2.2 摄像头预览</strong><a class="headerlink" href="#id54" title="Link to this heading"></a></h4>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0 v4l2src device=/dev/video55 ! video/x-raw, format=NV12, width=1920, height=1080, framerate=30/1 ! waylandsink&lt;/font&gt;

Setting pipeline to PAUSED ...

Using mplane plugin for capture

Pipeline is live and does not need PREROLL ...

Pipeline is PREROLLED ...

Setting pipeline to PLAYING ...

New clock: GstSystemClock

[  314.354521] rkisp_hw 27c00000.isp: set isp clk = 702000000Hz

[  314.361618] rkisp rkisp-vir0: first params buf queue

[  314.362034] rkcif-mipi-lvds: stream[0] start streaming

[  314.362194] rockchip-mipi-csi2 mipi0-csi2: stream on, src_sd: 000000003df896bb, sd_name:rockchip-csi2-dphy0

[  314.362209] rockchip-mipi-csi2 mipi0-csi2: stream ON

[  314.362247] rockchip-csi2-dphy0: dphy0, data_rate_mbps 1080

[  314.362523] rockchip-csi2-dphy csi2-dcphy0: csi2_dphy_s_stream stream on:1, dphy0, ret 0

[  314.362537] ov13855 3-0036: ov13855_s_stream: on: 1, 4224x3136@30

Redistribute latency...

0:00:02.0 / 99:99:99.
</pre></div>
</div>
</section>
<section id="id55">
<h4><strong>4.4.2.3 摄像头拍照</strong><a class="headerlink" href="#id55" title="Link to this heading"></a></h4>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>root@ok3576-buildroot:/# &lt;font style=&quot;color:#0000FF;&quot;&gt;gst-launch-1.0 v4l2src device=/dev/video5 num-buffers=1 ! video/x-raw,format=NV12,width=640,height=480 ! mppjpegenc ! filesink location=pic.jpg&lt;/font&gt;

//摄像头拍照（前置）

Setting pipeline to PAUSED ...

Using mplane plugin for capture

Pipeline is live and does not need PREROLL ...

Pipeline is PREROLLED ...

Setting pipeline to PLAYING ...

New clock: GstSystemClock

[  434.443953] rkisp_hw 27c00000.isp: set isp clk = 702000000Hz

[  434.451747] rkisp rkisp-vir0: first params buf queue

[  434.452082] rkcif-mipi-lvds: stream[0] start streaming

[  434.452177] rockchip-mipi-csi2 mipi0-csi2: stream on, src_sd: 000000003df896bb, sd_name:rockchip-csi2-dphy0

[  434.452187] rockchip-mipi-csi2 mipi0-csi2: stream ON

[  434.452217] rockchip-csi2-dphy0: dphy0, data_rate_mbps 1080

[  434.452685] rockchip-csi2-dphy csi2-dcphy0: csi2_dphy_s_stream stream on:1, dphy0, ret 0

[  434.452695] ov13855 3-0036: ov13855_s_stream: on: 1, 4224x3136@30

[  434.587464] rkisp-vir0: MIPI drop frame

Redistribute latency...

Got EOS from element &quot;pipeline0&quot;.

Execution ended after 0:00:00.149978098

Setting pipeline to NULL ...

[  434.668086] rkisp-vir0: MIPI drop frame

[  434.668485] rkcif-mipi-lvds: stream[0] start stopping, total mode 0x2, cur 0x2

[  434.708426] rockchip-mipi-csi2 mipi0-csi2: stream off, src_sd: 000000003df896bb, sd_name:rockchip-csi2-dphy0

[  434.708454] rockchip-mipi-csi2 mipi0-csi2: stream OFF

[  434.709488] rockchip-csi2-dphy csi2-dcphy0: csi2_dphy_s_stream_stop stream stop, dphy0

[  434.709501] rockchip-csi2-dphy csi2-dcphy0: csi2_dphy_s_stream stream on:0, dphy0, ret 0

[  434.709528] ov13855 3-0036: ov13855_s_stream: on: 0, 4224x3136@30

[  434.709842] rkcif-mipi-lvds: stream[0] stopping finished, dma_en 0x0

root@ok3576-buildroot:/# ls

//查看是否生成 pic.jpg，可拷贝到 pc 查看

bin               data  etc   lib    linuxrc     media  oem  pic.jpg  rockchip-test  run   sdcard  system  udisk     usr  vendor

busybox.fragment  dev   info  lib64  lost+found  mnt    opt  proc     root           sbin  sys     tmp     userdata  var
</pre></div>
</div>
</section>
</section>
<section id="ov5645">
<h3>4.2.3 OV5645 测试<a class="headerlink" href="#ov5645" title="Link to this heading"></a></h3>
<p><strong><font style="color:#000000;">摄像头对应节点</font></strong></p>
<p>CAM2 ：rkcif-mipi-lvds1</p>
<p>CAM3 ：rkcif-mipi-lvds2</p>
<p>CAM4 ：rkcif-mipi-lvds4</p>
<p>CAM5 ：rkcif-mipi-lvds3</p>
<p>以测试 CAM5 为例</p>
<section id="id56">
<h4><strong>4.2.3.1、摄像头识别检测</strong><a class="headerlink" href="#id56" title="Link to this heading"></a></h4>
<p>root&#64;rk3576-buildroot:/#   v4l2-ctl –list-devices</p>
<p>rkcif (platform:rkcif-mipi-lvds4):</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>    /dev/video44

    /dev/video45

    /dev/video46

    /dev/video47

    /dev/video48

    /dev/video49

    /dev/video50

    /dev/video51

    /dev/video52

    /dev/video53

    /dev/video54

    /dev/media4
</pre></div>
</div>
</section>
<section id="id57">
<h4><strong>4.2.3.2、查看支持格式</strong><a class="headerlink" href="#id57" title="Link to this heading"></a></h4>
<p>root&#64;ok3576-buildroot:/#  v4l2-ctl –list-formats-ext -d /dev/video44</p>
<p>ioctl: VIDIOC_ENUM_FMT</p>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>    Type: Video Capture Multiplanar



    [0]: &#39;NV16&#39; (Y/UV 4:2:2)

            Size: Stepwise 64x64 - 1920x1080 with step 8/8

    [1]: &#39;NV61&#39; (Y/VU 4:2:2)

            Size: Stepwise 64x64 - 1920x1080 with step 8/8

    [2]: &#39;NV12&#39; (Y/UV 4:2:0)

            Size: Stepwise 64x64 - 1920x1080 with step 8/8

    [3]: &#39;NV21&#39; (Y/VU 4:2:0)

            Size: Stepwise 64x64 - 1920x1080 with step 8/8

    [4]: &#39;YUYV&#39; (YUYV 4:2:2)

            Size: Stepwise 64x64 - 1920x1080 with step 8/8

    [5]: &#39;YVYU&#39; (YVYU 4:2:2)

            Size: Stepwise 64x64 - 1920x1080 with step 8/8

    [6]: &#39;UYVY&#39; (UYVY 4:2:2)

            Size: Stepwise 64x64 - 1920x1080 with step 8/8

    [7]: &#39;VYUY&#39; (VYUY 4:2:2)

            Size: Stepwise 64x64 - 1920x1080 with step 8/8
</pre></div>
</div>
</section>
<section id="id58">
<h4><strong>4.2.3.3、摄像头预览</strong><a class="headerlink" href="#id58" title="Link to this heading"></a></h4>
<p>root&#64;ok3576-buildroot:/#   <font style="color:#0000ff;">gst-launch-1.0 v4l2src device=/dev/video11 ! video/x-raw, format=NV12, width=1920,height=1080, framerate=30/1 ! waylandsink</font></p>
<p>Setting pipeline to PAUSED …</p>
<p>Using mplane plugin for capture</p>
<p>Pipeline is live and does not need PREROLL …</p>
<p>Pipeline is PREROLLED …</p>
<p>Setting pipeline to PLAYING …</p>
<p>New clock: GstSystemClock</p>
<p>Redistribute latency…</p>
<p>0:00:06.3 / 99:99:99.</p>
</section>
</section>
</section>
</section>
<section id="id59">
<h1>05_烧写系统<a class="headerlink" href="#id59" title="Link to this heading"></a></h1>
<div class="highlight-plain notranslate"><div class="highlight"><pre><span></span>OK3576-C开发板目前支持OTG烧写方式。在用户资料中提供了相应的烧写工具。
</pre></div>
</div>
<section id="otg">
<h2>5.1 OTG烧写系统<a class="headerlink" href="#otg" title="Link to this heading"></a></h2>
<section id="id60">
<h3>5.1.1 OTG驱动安装<a class="headerlink" href="#id60" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>路径：OK3576-C（Linux）用户资料\Linux\工具</font>DriverAssitant_v5.11.zip</p></li>
</ul>
<p>将上述路径文件解压到任意目录，以管理员权限运行</p>
<p>打开DriverInstall.exe 程序。</p>
<p><img alt="Image" src="_images/8975ec466ec047ed9a8715161a370c5e.png" /></p>
<p>点击“驱动安装”。</p>
<p><img alt="Image" src="_images/98517c3182d24e6d9c099a214f28b101.png" /></p>
</section>
<section id="id61">
<h3>5.1.2 OTG完全烧写测试<a class="headerlink" href="#id61" title="Link to this heading"></a></h3>
<section id="rkdevtool">
<h4><strong>5.1.2.1 RKDevTool烧写测试</strong><a class="headerlink" href="#rkdevtool" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>路径：OK3576-C（Linux）用户资料\Linux\工具</font> RKDevTool_Release_v3.31.zip</p></li>
</ul>
<p>这是瑞芯微提供的一款开发工具，使用前将其解压到全英文路径下，用Type-C线连接开发板TYPE-C0口和主机，按住开发板的recovery键不要松开，然后按一下reset键系统复位，大约两秒后松开recovery键。瑞芯微开发工具上将提示发现loader设备。</p>
<ul class="simple">
<li><p>注意：识别设备的操作是开发板上电时recover按键是按下的状态。</p></li>
<li><p>注意：理论上瑞芯微开发工具解压目录随意，但有用户反馈瑞芯微开发工具解压目录需为全英文，若打开开发工具后与下图不一致，请考虑解压其在全英文目录下。</p></li>
</ul>
<p>打开瑞芯微开发工具：</p>
<p><img alt="Image" src="_images/5d6fc68a776a4953b536b7b35c6effaf.png" /></p>
<p>点击“切换“等待一会进入LOADER设备。根据自己镜像的位置调整镜像路径，然后勾选要更新的镜像，然后点击“执行”按钮进行升级。</p>
<p><img alt="Image" src="_images/763ec0df048e4a1491708a21b942cdf0.png" /></p>
<p><img alt="Image" src="_images/4afe701b2b6c45899ab3b1ba0edbbb57.png" /></p>
</section>
</section>
<section id="id62">
<h3>5.2 TF 卡烧写系统<a class="headerlink" href="#id62" title="Link to this heading"></a></h3>
<p><font style="color:#000000;">烧写 TF 卡制作与烧写测试 </font></p>
<p><font style="color:#000000;">注意：测试 TF 卡容量最大为 32G，使用 32G 以上 TF 卡可能会烧写失败。 </font></p>
<p><font style="color:#000000;">将用户资料工具目录的 SDDiskTool_v1.76.zip拷贝到 windows 任意目录。以管理员权限运行 </font></p>
<p><font style="color:#000000;">SD_Firmware_Tool.exe。</font></p>
<p><img alt="Image" src="_images/a91fc93cb5bf476bbff2ebe975b5ea7b.png" /></p>
<p><font style="color:#000000;">选择磁盘设备，勾选“固件升级”，并选择 update.img。点击开始创建。</font></p>
<p><img alt="Image" src="_images/8740d473a96143fe84448cc7f9e007ac.png" /></p>
<p><img alt="Image" src="_images/fcfe76c3478e41b5bf25b53b68a368d6.png" /></p>
<p><font style="color:#000000;">将 TF 卡插入开发板并启动，系统将自动进入烧写流程。烧写完成后屏幕和串口都将提示： </font></p>
<p><font style="color:#000000;">Please remove SD CARD!!!, wait for reboot. </font></p>
<p><font style="color:#000000;">此时，拔出 TF 卡，系统自动重新启动(请勿直接断电)。 </font></p>
<p><font style="color:#000000;">批量生产时，可以根据核心板的心跳灯来判断烧写是否完成，烧写过程中的心跳灯变化如下： </font></p>
<p><font style="color:#000000;">1、内核启动阶段：心跳灯模式，规律的间歇性闪烁。 </font></p>
<p><font style="color:#000000;">2、烧写准备阶段：EMMC 指示灯，熄灭。 </font></p>
<p><font style="color:#000000;">3、烧写进行阶段：EMMC 指示灯，常亮。 </font></p>
<p><font style="color:#000000;">4、烧写完成阶段：心跳灯模式，规律的间歇性闪烁。 </font></p>
<p><font style="color:#000000;">烧写状态串口信息：</font></p>
<p><img alt="Image" src="_images/d2c3acc85556408b9a887b9305caf707.png" /></p>
<p><font style="color:#000000;">若移除 TF 未自动重启，手动重启也可完成烧写。烧写过程中请耐心等待。</font></p>
</section>
</section>
</section>


           </div>
          </div>
          <div class="forlinx-footer-social" style="margin-top: 15px; padding: 0 16px;">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">

    <!-- 左侧版权信息 -->
    <span style="font-size: 14px; color: #444;">
      © <a href="https://www.forlinx.net/" target="_blank" style="color: inherit; text-decoration: none;">Forlinx Embedded</a>
    </span>

    <!-- 右侧社交图标 -->
    <div>
      <a href="https://www.facebook.com/Forlinx-Embedded-177890724336237" target="_blank">
        <i class="fab fa-facebook fa-lg" style="margin: 0 6px; color:#3b5998;"></i>
      </a>
      <a href="https://www.linkedin.com/company/forlinx-embedded-technology-co-ltd/" target="_blank">
        <i class="fab fa-linkedin fa-lg" style="margin: 0 6px; color:#0077b5;"></i>
      </a>
      <a href="https://x.com/ForlinxOfficial" target="_blank">
        <i class="fab fa-x-twitter fa-lg" style="margin: 0 6px; color:#000;"></i>
      </a>
      <a href="https://www.youtube.com/@forlinxembedded" target="_blank">
        <i class="fab fa-youtube fa-lg" style="margin: 0 6px; color:#FF0000;"></i>
      </a>
      <a href="https://github.com/ForlinxEmbedded" target="_blank">
        <i class="fab fa-github fa-lg" style="margin: 0 6px; color:#333;"></i>
      </a>
      <a href="https://www.forlinx.net/" target="_blank">
        <i class="fas fa-globe fa-lg" style="margin: 0 6px; color:#2274A5;"></i>
      </a>
    </div>

  </div>
</div>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>